!function(e){!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.imjs=e()}}(function(){var f;return function n(e,f,o){function d(t,l){if(!f[t]){if(!e[t]){var u="function"==typeof require&&require;if(!l&&u)return u(t,!0);if(i)return i(t,!0);var p=new Error("Cannot find module '"+t+"'");throw p.code="MODULE_NOT_FOUND",p}var s=f[t]={exports:{}};e[t][0].call(s.exports,function(f){var n=e[t][1][f];return d(n?n:f)},s,s.exports,n,e,f,o)}return f[t].exports}for(var i="function"==typeof require&&require,t=0;t<o.length;t++)d(o[t]);return d}({1:[function(e,f,n){(function(){n.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],2:[function(n,o,d){(function(d){(function(){var i,t,l;n("./shiv"),o.exports=t=n("./service"),l=t.utils.merge,i=function(e,n){return"function"==typeof f&&f.amd?f(e,[],n):d[e]=n},i("imjs",t),"undefined"==typeof e?i("intermine",t):i("intermine",l(e,t))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./service":10,"./shiv":12}],3:[function(e,f,n){(function(){var f,o,d,i,t,l,u,p,s,y,c,a,m,r,w,b,g,j,x;i=e("url"),o=e("JSONStream"),a=e("http"),f=e("./constants").ACCEPT_HEADER,u=e("./version").VERSION,x=j=e("./util"),y=x.error,s=x.defer,r=x.merge,m=x.invoke,l="node-http/imjs-"+u,d=/,\s*$/,t="application/x-www-form-urlencoded",n.supports=function(){return!0},g=function(e,f,n){return function(e){var d,i;return null==e.pipe?n(new Error("response is not a stream")):(e.on("error",n),null!=e.statusCode&&200!==e.statusCode?(d=o.parse("error"),d.pause(),e.pipe(d),n([e.statusCode,d])):(i=o.parse("results.*"),i.pause(),e.pipe(i),f(i)))}},c=function(e,f,n,o){var d,i;return d=e.type,i=e.url,"Could not parse response to "+d+" "+i+': "'+f+'" ('+o+": "+n+")"},p=function(e,f,n){return function(o){var d;return d="",o.on("data",function(e){return d+=e}),o.on("error",n),o.on("end",function(){var i,t,l,u,p,s,y;if(null!=(null!=o?o.headers:void 0)&&(i=o.headers["content-type"]),"application/json"!==i&&!/json/.test(e.dataType)&&!/json/.test(e.data.format))return(p=d.match(/\[ERROR\] (\d+)([\s\S]*)/))?n(new Error(p[2])):(u=200<=(y=o.statusCode)&&400>y?f:n)(d);if(""===d&&200===o.statusCode)return f();try{return s=JSON.parse(d),(l=s.error)?n(new Error(l)):f(s)}catch(a){return t=a,n(o.statusCode>=400?new Error(o.statusCode):new Error(c(e,d,t,o.statusCode)))}})}},n.iterReq=function(e,f,n){return function(o,d,i,t,l){var u,p,s,c,a;return null==d&&(d={}),null==i&&(i=function(){}),null==t&&(t=function(){}),null==l&&(l=function(){}),j.isFunction(d)&&(a=[{},d,i,t],d=a[0],i=a[1],t=a[2],l=a[3]),c=r({format:n},d,{query:o.toXML()}),u=function(e){return e.on("data",i),e.on("error",t),e.on("end",l),setTimeout(function(){return null!=e.resume?e.resume():void 0},3),e},s=function(e){var f,n;return n=e[0],f=e[1],f.on("data",t),f.on("error",t),f.on("end",l),null!=f.resume&&f.resume(),y(n)},p=this.makeRequest(e,f,c,null,!0),p.then(u,s),p}},b=function(e,f,n){var o;return o=setTimeout(function(){return f("Request timed out.")},e),n.then(function(){return cancelTimeout(o)})},w=function(e){var n,o,d,u,p,s,y,c;if(!e.url)throw new Error("No url provided in "+JSON.stringify(e));if("string"==typeof e.data){if(d=e.data,"GET"===(s=e.type)||"DELETE"===s)throw new Error("Invalid request. "+e.type+" requests must not have bodies")}else d=j.querystring(e.data);if(o=i.parse(e.url,!0),o.withCredentials=!1,o.method=e.type||"GET",null!=e.port&&(o.port=e.port),o.headers={"User-Agent":l,Accept:f[e.dataType]},("GET"===(y=o.method)||"DELETE"===y)&&(null!=d?d.length:void 0)?(u=/\?/.test(o.path)?"&":"?",o.path+=u+d,d=null):(o.headers["Content-Type"]=(e.contentType||t)+"; charset=UTF-8",o.headers["Content-Length"]=d.length),null!=e.headers){c=e.headers;for(n in c)p=c[n],o.headers[n]=p}return null!=e.auth&&(o.auth=e.auth),[o,d]},n.doReq=function(e,f){var n,o,d,i,t,l,u,y,c,m,r;m=s(),i=m.promise,u=m.resolve,t=m.reject,i.then(null,e.error);try{r=w(e),c=r[0],d=r[1],o=(f?g:p)(e,u,t),l=a.request(c,o),l.on("error",function(f){return t(new Error("Error: "+c.method+" "+e.url+": "+f))}),null!=d&&l.write(d),l.end(),y=e.timeout,y>0&&b(y,t,i)}catch(j){n=j,t(n)}return i}}).call(this)},{"./constants":1,"./util":15,"./version":16,JSONStream:19,http:26,url:55}],4:[function(e,f,n){(function(){var f,o,d,i,t,l,u,p,s,y,c,a,m,r,w={}.hasOwnProperty,b=[].indexOf||function(e){for(var f=0,n=this.length;n>f;f++)if(f in this&&this[f]===e)return f;return-1},g=function(e,f){return function(){return e.apply(f,arguments)}};s=e("./util"),a=n,m=s.uniqBy,u=s.difference,l=s.defer,r=s.withCB,c=s.id,y=s.get,p=s.fold,t=s.concatMap,i=6e4,f=function(){function e(e){var f,n;for(f in e)w.call(e,f)&&(n=e[f],this[f]=n)}var f;return e.prototype.getStats=function(e){return null!=e?this.stats[e]:this.stats},f=t(y("matches")),e.prototype.getMatches=function(e){var n;return"MATCH"===e?this.matches[e]:null!=(n=f(this.matches[e]))?n:[]},e.prototype.getMatchIds=function(e){return null!=e?this.getMatches(e).map(y("id")):this.allMatchIds()},e.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},e.prototype.allMatchIds=function(){var e;return(e=p(function(e){return function(f,n){return f.concat(e.getMatchIds(n))}}(this)))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},e}(),d=function(){function e(e){var f,n;for(f in e)w.call(e,f)&&(n=e[f],this[f]=n)}var f,n,o,d;return d=m(c),f=t(c),n=function(e){var n,o;return f(function(){var f,d;f=e.identifiers,d=[];for(n in f)o=f[n],d.push(o);return d}())},o=function(e,f){return null==f||b.call(n(e),f)>=0},e.prototype.getStats=function(e){switch(e){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},e.prototype.getIdentifierStats=function(){var e,n,o,i,t,l;return l=function(e){var n,o;return d(f(function(){var f,d,i;for(i=[],f=0,d=e.length;d>f;f++)o=e[f],i.push(function(){var e;e=[];for(n in null!=o?o.identifiers:void 0)e.push(n);return e}());return i}()))},i=l(this.getMatches("MATCH")),n=l(this.getMatches()),t=i.length,e=n.length,o=u(n,i).length,{matches:t,all:e,issues:o}},e.prototype.getObjectStats=function(){var e,f,o,d;return d=this.goodMatchIds().length,e=this.allMatchIds().length,f=function(){var e;e=[];for(c in this)w.call(this,c)&&(o=this[c],b.call(n(o),"MATCH")<0&&e.push(c));return e}.call(this).length,{matches:d,all:e,issues:f}},e.prototype.getMatches=function(e){var f,n;n=[];for(c in this)w.call(this,c)&&(f=this[c],o(f,e)&&n.push(f));return n},e.prototype.getMatchIds=function(e){var f,n;n=[];for(c in this)w.call(this,c)&&(f=this[c],o(f,e)&&n.push(c));return n},e.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},e.prototype.allMatchIds=function(){return this.getMatchIds()},e}(),o=function(){function e(e,f){this.uid=e,this.service=f,this.del=g(this.del,this),this.fetchResults=g(this.fetchResults,this),this.fetchErrorMessage=g(this.fetchErrorMessage,this),this.fetchStatus=g(this.fetchStatus,this)}return e.prototype.fetchStatus=function(e){return r(e,this.service.get("ids/"+this.uid+"/status").then(y("status")))},e.prototype.fetchErrorMessage=function(e){return r(e,this.service.get("ids/"+this.uid+"/status").then(y("message")))},e.prototype.fetchResults=function(e){var n,o;return n=this.service.get("ids/"+this.uid+"/result").then(y("results")),o=this.service.fetchVersion(),o.then(function(e){return n.then(function(n){return e>=16?new f(n):new d(n)})})},e.prototype.del=function(e){return r(e,this.service.makeRequest("DELETE","ids/"+this.uid))},e.prototype.decay=50,e.prototype.poll=function(e,f,n){var o,d,t,u,p,s,y;return y=l(),t=y.promise,p=y.resolve,u=y.reject,t.then(e,f),d=null!=n?n:function(){},s=this.fetchStatus(),s.then(null,u),o=this.decay,this.decay=Math.min(i,1.25*o),s.then(function(e){return function(f){switch(d(f),f){case"SUCCESS":return e.fetchResults().then(p,u);case"ERROR":return e.fetchErrorMessage().then(u,u);default:return setTimeout(function(){return e.poll(p,u,d)},o)}}}(this)),t},e}(),o.prototype.wait=o.prototype.poll,o.create=function(e){return function(f){return new o(f,e)}},a.IDResolutionJob=o,a.CategoryResults=f,a.IdResults=d}).call(this)},{"./util":15}],5:[function(e,f,n){(function(){var f,o,d,i,t,l,u,p,s,y,c,a,m,r,w,b=function(e,f){return function(){return e.apply(f,arguments)}},g={}.hasOwnProperty,j=[].indexOf||function(e){for(var f=0,n=this.length;n>f;f++)if(f in this&&this[f]===e)return f;return-1};r=e("./util"),s=n,a=r.merge,w=r.withCB,u=r.get,y=r.invoke,d=r.REQUIRES_VERSION,m=r.set,l=r.dejoin,t="list/tags",i="lists/shares",f="lists/invitations",c=function(e){return"__folder__"===e.substr(0,e.indexOf(":"))},p=function(e){return e.substr(e.indexOf(":")+1)},o=function(){function e(e,f){var n,o;this.service=f,this._updateTags=b(this._updateTags,this),this.hasTag=b(this.hasTag,this);for(n in e)g.call(e,n)&&(o=e[n],this[n]=o);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(c).map(p)}var n;return e.prototype.hasTag=function(e){return j.call(this.tags,e)>=0},e.prototype.query=function(e){return null==e&&(e=["*"]),this.service.query({select:e,from:this.type,where:[[this.type,"IN",this.name]]})},e.prototype.del=function(e){return this.service.makeRequest("DELETE","lists",{name:this.name},e)},n=function(e){var f;return f=e.tags},e.prototype._updateTags=function(e,f){return null==e?(this.tags=f.slice(),this.folders=this.tags.filter(c).map(p)):void 0},e.prototype.fetchTags=function(e){return w(this._updateTags,e,this.service.makeRequest("GET","list/tags",{name:this.name}).then(n))},e.prototype.addTags=function(e,f){var o;return o={name:this.name,tags:e},w(this._updateTags,f,this.service.makeRequest("POST","list/tags",o).then(n))},e.prototype.removeTags=function(e,f){var o;return o={name:this.name,tags:e},w(this._updateTags,f,this.service.makeRequest("DELETE","list/tags",o).then(n))},e.prototype.contents=function(e){return w(e,this.query().then(l).then(y("records")))},e.prototype.rename=function(e,f){var n;return n=this.service.post("lists/rename",{oldname:this.name,newname:e}).then(u("listName")).then(function(e){return function(f){return e.name=f}}(this)).then(this.service.fetchList),w(f,n)},e.prototype.copy=function(e,f){var n,o,d,i,t,l,p;return null==e&&(e={}),null==f&&(f=function(){}),1===arguments.length&&r.isFunction(e)&&(t=[{},e],e=t[0],f=t[1]),"string"==typeof e&&(e={name:e}),o=n=null!=(l=e.name)?l:""+this.name+"_copy",i=this.tags.concat(null!=(p=e.tags)?p:[]),d=this.query(["id"]),w(f,this.service.fetchLists().then(y("map",u("name"))).then(function(e){return function(f){var t;for(t=1;j.call(f,o)>=0;)o=""+n+"-"+t++;return d.then(y("saveAsList",{name:o,tags:i,description:e.description}))}}(this)))},e.prototype.enrichment=function(e,f){return this.service.enrichment(a({list:this.name},e),f)},e.prototype.shareWithUser=function(e,f){return w(f,this.service.post(i,{list:this.name,"with":e}))},e.prototype.inviteUserToShare=function(e,n,o){return null==n&&(n=!0),null==o&&(o=function(){}),w(o,this.service.post(f,{list:this.name,to:e,notify:!!n}))},e}(),s.List=o}).call(this)},{"./util":15}],6:[function(e,f,n){(function(){var f,o,d,i,t,l,u,p,s,y,c=function(e,f){return function(){return e.apply(f,arguments)}},a=[].indexOf||function(e){for(var f=0,n=this.length;n>f;f++)if(f in this&&this[f]===e)return f;return-1};i=e("./table").Table,d=e("./path").PathInfo,y=e("./util"),u=y.flatten,l=y.find,t=y.error,s=y.omap,p=n,f=new i({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),o=function(){function e(e){var n,o;this.name=e.name,n=e.classes,this.findCommonType=c(this.findCommonType,this),this.findSharedAncestor=c(this.findSharedAncestor,this),this.getAncestorsOf=c(this.getAncestorsOf,this),this.getSubclassesOf=c(this.getSubclassesOf,this),this.getPathInfo=c(this.getPathInfo,this),o=s(function(e){return function(f,n){return[f,new i(n,e)]}}(this)),this.classes=o(n),this.classes["java.lang.Object"]=f}return e.prototype.getPathInfo=function(e,f){return d.parse(this,e,f)},e.prototype.getSubclassesOf=function(e){var f,n,o,d,i,t;if(n=e&&e.name?e:this.classes[e],null==n)throw new Error(""+e+" is not a table");o=[n.name],i=this.classes;for(d in i)f=i[d],t=n.name,a.call(f.parents(),t)>=0&&(o=o.concat(this.getSubclassesOf(f)));return o},e.prototype.getAncestorsOf=function(e){var f,n;if(f=e&&e.name?e:this.classes[e],null==f)throw new Error(""+e+" is not a table");return n=f.parents(),n.filter(function(e){return function(f){return e.classes[f]}}(this)).reduce(function(e){return function(f,n){return f.concat(e.getAncestorsOf(n))}}(this),n)},e.prototype.findSharedAncestor=function(e,f){var n,o,d;return null===f||null===e?null:e===f?e:(n=this.getAncestorsOf(e),a.call(n,f)>=0?f:(o=this.getAncestorsOf(f),a.call(o,e)>=0?e:d=l(n,function(e){return a.call(o,e)>=0})))},e.prototype.findCommonType=function(e){return null==e&&(e=[]),e.reduce(this.findSharedAncestor)},e}(),o.prototype.makePath=o.prototype.getPathInfo,o.prototype.findCommonTypeOfMultipleClasses=o.prototype.findCommonType,o.load=function(e){var f;try{return new o(e)}catch(n){throw f=n,new Error("Error loading model: "+f)}},o.INTEGRAL_TYPES=["int","Integer","long","Long"],o.FRACTIONAL_TYPES=["double","Double","float","Float"],o.NUMERIC_TYPES=o.INTEGRAL_TYPES.concat(o.FRACTIONAL_TYPES),o.BOOLEAN_TYPES=["boolean","Boolean"],p.Model=o}).call(this)},{"./path":7,"./table":13,"./util":15}],7:[function(e,f,n){(function(){var f,o,d,i,t,l,u,p,s,y,c,a,m,r,w=function(e,f){return function(){return e.apply(f,arguments)}},b=[].slice,g=[].indexOf||function(e){for(var f=0,n=this.length;n>f;f++)if(f in this&&this[f]===e)return f;return-1};s=n,m=e("./util"),r=m.withCB,t=m.concatMap,p=m.get,i=m.any,c=m.set,l=m.copy,a=m.success,u=m.error,f={},o={},y=function(e,f,n){var o,d,i;return""+(null!=e?e.name:void 0)+"|"+(null!=e&&null!=(i=e.service)?i.root:void 0)+"|"+f+":"+function(){var e;e=[];for(o in n)d=n[o],e.push(""+o+"="+d);return e}()},d=function(){function e(e){var f,n;this.root=e.root,this.model=e.model,this.descriptors=e.descriptors,this.subclasses=e.subclasses,this.displayName=e.displayName,this.ident=e.ident,this.allDescriptors=w(this.allDescriptors,this),this.getChildNodes=w(this.getChildNodes,this),this.getDisplayName=w(this.getDisplayName,this),this.isa=w(this.isa,this),this.append=w(this.append,this),this.getParent=w(this.getParent,this),this.getEndClass=w(this.getEndClass,this),this.containsCollection=w(this.containsCollection,this),this.isCollection=w(this.isCollection,this),this.isReverseReference=w(this.isReverseReference,this),this.isReference=w(this.isReference,this),this.isClass=w(this.isClass,this),this.isAttribute=w(this.isAttribute,this),this.isRoot=w(this.isRoot,this),n=this.descriptors,this.mid=2<=n.length?b.call(n,0,f=n.length-1):(f=0,[]),this.end=n[f++],null==this.ident&&(this.ident=y(this.model,this,this.subclasses))}return e.prototype.isRoot=function(){return 0===this.descriptors.length},e.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},e.prototype.isClass=function(){return this.isRoot()||this.isReference()},e.prototype.isReference=function(){var e;return null!=(null!=(e=this.end)?e.referencedType:void 0)},e.prototype.isReverseReference=function(){var e,f,n,o,d;return this.isReference()&&this.mid.length>0?(d=this.end,o=d.reverseReference,n=d.referencedType,f=this.getParent(),e=f.getParent(),null!=n&&e.isa(n)&&f.end.name===o):!1},e.prototype.isCollection=function(){var e,f;return null!=(e=null!=(f=this.end)?f.isCollection:void 0)?e:!1},e.prototype.containsCollection=function(){return i(this.descriptors,function(e){return e.isCollection})},e.prototype.getEndClass=function(){var e;return this.model.classes[this.subclasses[this.toString()]||(null!=(e=this.end)?e.referencedType:void 0)]||this.root},e.prototype.getParent=function(){var f;if(this.isRoot())throw new Error("Root paths do not have parents");return f={root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses},new e(f)},e.prototype.append=function(f){var n,o;if(this.isAttribute())throw new Error(""+this+" is an attribute.");if(o="string"==typeof f?this.getType().fields[f]:f,null==o)throw new Error(""+f+" is not a field of "+this.getType());return n={root:this.root,model:this.model,descriptors:this.descriptors.concat([o]),subclasses:this.subclasses},new e(n)},e.prototype.isa=function(e){var f,n;return null==e?!1:this.isAttribute()?this.getType()===e:(f=e.name?e.name:""+e,n=this.getType(),f===n.name||g.call(this.model.getAncestorsOf(n),f)>=0)},e.prototype.getDisplayName=function(e){var n,o,d,i;return(o=this.displayName)?a(o):(null==this.namePromise&&(this.namePromise=(n=f[this.ident])?a(n):this.isRoot()&&this.root.displayName?a(this.root.displayName):null==this.model.service?u("No service"):(i="model"+t(function(e){return"/"+e.name})(this.allDescriptors()),d=c({format:"json"})(l(this.subclasses)),this.model.service.get(i,d).then(p("display")).then(function(e){return function(n){var o;return null!=f[o=e.ident]?f[o]:f[o]=n}}(this)))),r(e,this.namePromise))},e.prototype.getChildNodes=function(){var e,f,n,o,d;o=(null!=(n=this.getEndClass())?n.fields:void 0)||{},d=[];for(f in o)e=o[f],d.push(this.append(e));return d},e.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},e.prototype.toString=function(){return this.allDescriptors().map(p("name")).join(".")},e.prototype.equals=function(e){return this===e||this.ident&&(null!=e?e.ident:void 0)===this.ident},e.prototype.getType=function(){var e,f;return(null!=(e=this.end)&&null!=(f=e.type)?f.replace(/java\.lang\./,""):void 0)||this.getEndClass()},e}(),d.prototype.toPathString=d.prototype.toString,d.parse=function(e,f,n){var i,t,l,u,p,s,c,a,m;return null==n&&(n={}),p=y(e,f,n),(i=o[p])?i:(a=(f+"").split("."),m=t=e.classes[a.shift()],s=m.name,l=function(){var o,d,i,l;for(l=[],o=0,d=a.length;d>o;o++){if(c=a[o],u=(null!=t?t.fields[c]:void 0)||(null!=(i=t=e.classes[n[s]])?i.fields[c]:void 0),!u)throw new Error("Could not find "+c+" in "+t+" when parsing "+f);s+="."+c,t=e.classes[u.type||u.referencedType],l.push(u)}return l}(),o[p]=new d({root:m,model:e,descriptors:l,subclasses:n,ident:p}))},d.flushCache=function(){return o={},f={}},s.PathInfo=d}).call(this)},{"./util":15}],8:[function(e,f,n){(function(){var n;n=e("es6-promise").Promise,f.exports=n}).call(this)},{"es6-promise":31}],9:[function(e,f,n){(function(){var f,o,d,i,t,l,u,p,s,y,c,a,m,r,w,b,g,j,x,v,h,k,q,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_=[].indexOf||function(e){for(var f=0,n=this.length;n>f;f++)if(f in this&&this[f]===e)return f;return-1},ee=function(e,f){return function(){return e.apply(f,arguments)}},fe=[].slice,ne={}.hasOwnProperty;d=e("backbone-events-standalone"),B=n,B.xml=e("./xml"),S=e("./util"),l=S.REQUIRES_VERSION,T=S.withCB,F=S.merge,x=S.filter,K=S.partition,v=S.fold,r=S.concatMap,z=S.id,h=S.get,E=S.invoke,P=S.querystring,k=function(e){var f;if(f=null!=(null!=e?e.toLowerCase:void 0)?t.OP_DICT[e.toLowerCase()]:null,!f)throw new Error("Illegal constraint operator: "+e);return f},f=["path","op","code"],p=f.concat(["value","extraValue"]),u=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],i=function(e){return S.compose(e.fetchList,h("listName"))},o=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],b=function(e){return null==e&&(e=""),e.substr(e.indexOf("."))},m=function(e){return null!=e?"<value>"+S.escape(e)+"</value>":"<nullValue/>"},y=function(e,f){var n,o;return function(){var d;d=[];for(n in e)o=e[n],_.call(f,n)>=0&&d.push(""+n+'="'+S.escape(o)+'" ');return d}().join("")},J=function(e){return"<constraint "+y(e,f)+"/>"},Q=function(e){return"<constraint "+y(e,["path","type"])+"/>"},M=function(e){return"<constraint "+y(e,p)+"/>"},H=function(e){return"<constraint "+y(e,f)+">"+r(m)(e.values)+"</constraint>"},A=function(e){return"<constraint "+y(e,f)+'ids="'+e.ids.join(",")+'"/>'},c=function(e){var f;return null!=e.values?H(e):null!=e.ids?A(e):null==e.op?Q(e):(f=e.op,_.call(t.NULL_OPS,f)>=0?J(e):M(e))},q=function(e){return e.replace(/^[^\.]+\./,"")},w=function(e){var f,n,o,d,i,t,l,u,p,s,y;return t=e.path,p=e.type,i=e.op,s=e.value,y=e.values,o=e.extraValue,d=e.ids,f=e.code,n=e.editable,u=e.switched,l=e.switchable,d=null!=d?d.slice():void 0,y=null!=y?y.slice():void 0,I({path:t,type:p,op:i,value:s,values:y,extraValue:o,ids:d,code:f,editable:n,switched:u,switchable:l})},a=function(e){var f;return f=w(e),f.path=q(f.path),f},I=function(e){var f,n;for(f in e)n=e[f],null==n&&delete e[f];return e},g=function(e,f){return"Did not remove a single constraint. original = "+e+", reduced = "+f},D=function(e,f){var n,o,d,i,l,u,p;if(n={path:e},null===f)n.op="IS NULL";else if(S.isArray(f))n.op="ONE OF",n.values=f;else if("string"==(u=typeof f)||"number"===u||"boolean"===u)p="function"==typeof f.toUpperCase?f.toUpperCase():void 0,_.call(t.NULL_OPS,p)>=0?n.op=f:(n.op="=",n.value=f);else if(d=function(){var e;e=[];for(o in f)l=f[o],e.push(o);return e}(),_.call(d,"isa")>=0)S.isArray(f.isa)?(n.op=o,n.values=f.isa):n.type=f.isa;else{_.call(d,"extraValue")>=0&&(n.extraValue=f.extraValue);for(o in f)i=f[o],"extraValue"!==o&&(n.op=o,S.isArray(i)?n.values=i:n.value=i)}return n},C=function(e){var f,n,o,d;return e=e.slice(),n={path:e.shift()},1===e.length?(f=e[0],d="function"==typeof f.toUpperCase?f.toUpperCase():void 0,_.call(t.NULL_OPS,d)>=0?n.op=f:n.type=f):e.length>=2&&(n.op=e[0],o=e[1],S.isArray(o)?n.values=o:n.value=o,3===e.length&&(n.extraValue=e[2])),n},O=function(e){var f;return function(){var n,o,d;for(d=[],n=0,o=e.length;o>n;n++)f=e[n],d.push(""+f.path+" "+f.direction);return d}().join(" ")},N=function(e){var f,n,o,d,i,t,l;if(null==e)return[];for(n=e.split(/\s+/),o=function(){var e,f,o;for(o=[],d=e=0,f=n.length/2;f>=0?f>e:e>f;d=f>=0?++e:--e)o.push(2*d);return o}(),l=[],i=0,t=o.length;t>i;i++)f=o[i],l.push([n[f],n[f+1]]);return l},L=function(){var e,f;return f=this.sortOrder,this.sortOrder=function(){var n,o,d;for(d=[],n=0,o=f.length;o>n;n++)e=f[n],this.isRelevant(e.path)&&d.push(e);return d}.call(this),f.length!==this.sortOrder.length?this.trigger("change:sortorder change:orderby",this.sortOrder.slice()):void 0},t=function(){function e(e,f,n){var o,d,i,t,l,u,p,s,y,c,a,m,r,w,b,g;for(u=null!=n?n:{},o=u.model,i=u.summaryFields,this.addConstraint=ee(this.addConstraint,this),this.expandStar=ee(this.expandStar,this),this.adjustPath=ee(this.adjustPath,this),this.select=ee(this.select,this),null==e&&(e={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=S.copy(null!=(p=null!=(y=e.displayNames)?y:e.aliases)?p:{}),c=["name","title","comment","description","type"],t=0,l=c.length;l>t;t++)d=c[t],null!=e[d]&&(this[d]=e[d]);this.service=null!=f?f:{},this.model=null!=(a=null!=o?o:e.model)?a:{},this.summaryFields=null!=(m=null!=i?i:e.summaryFields)?m:{},this.root=null!=(r=e.root)?r:e.from,this.maxRows=null!=(w=null!=(b=e.size)?b:e.limit)?w:e.maxRows,this.start=null!=(g=null!=(s=e.start)?s:e.offset)?g:0,this.select(e.views||e.view||e.select||[]),this.addConstraints(e.constraints||e.where||[]),this.addJoins(e.joins||e.join||[]),this.orderBy(e.sortOrder||e.orderBy||[]),null!=e.constraintLogic&&(this.constraintLogic=e.constraintLogic),this.on("change:views",L,this)}var f,n,d,t,u,p,s,m,j;return e.JOIN_STYLES=["INNER","OUTER"],e.BIO_FORMATS=["gff3","fasta","bed"],e.NULL_OPS=["IS NULL","IS NOT NULL"],e.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],e.MULTIVALUE_OPS=["ONE OF","NONE OF"],e.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],e.TERNARY_OPS=["LOOKUP"],e.LOOP_OPS=["=","!="],e.LIST_OPS=["IN","NOT IN"],e.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF","in":"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},u=["name","view","sortOrder","constraintLogic","title","description","comment"],n=["path","type","op","code","value","ids"],s=function(e,f){var n,o,d,i;for(i=[],o=0,d=f.length;d>o;o++)n=f[o],e.hasAttribute(n)&&i.push([n,e.getAttribute(n)]);return i},d=function(e,f){var n,o,d,i,t;for(i=e.getElementsByTagName(f),t=[],o=0,d=i.length;d>o;o++)n=i[o],t.push(n);return t},j=function(e){return function(f){return f.getAttribute(e)}},e.fromXML=function(e){var f,o,i,t,l,p,y;if(o=B.xml.parse(e),p=d(o,"query")[0]||d(o,"template")[0],!p)throw new Error("no query in xml");return t=j("path"),y=j("style"),l=S.pairsToObj(s(p,u)),l.view=l.view.split(/\s+/),l.sortOrder=N(l.sortOrder),l.joins=function(){var e,f,n,o;for(n=d(p,"join"),o=[],e=0,f=n.length;f>e;e++)i=n[e],"OUTER"===y(i)&&o.push(t(i));return o}(),l.constraints=function(){var e,o,i,t;for(i=d(p,"constraint"),t=[],e=0,o=i.length;o>e;e++)f=i[e],t.push(function(e){var f,o,i,t,l;return f=S.pairsToObj(s(e,n)),null!=f.ids&&(f.ids=function(){var e,n,o,d;for(o=f.ids.split(","),d=[],e=0,n=o.length;n>e;e++)l=o[e],d.push(parseInt(l,10));return d}()),t=d(e,"value"),t.length&&(f.values=function(){var e,f,n;for(n=[],e=0,f=t.length;f>e;e++)i=t[e],n.push(function(){var e,f,n,d;for(n=i.childNodes,d=[],e=0,f=n.length;f>e;e++)o=n[e],d.push(o.data);return d}().join(""));return n}()),f}(f));return t}(),l},e.prototype.constraints=[],e.prototype.views=[],e.prototype.joins={},e.prototype.constraintLogic="",e.prototype.sortOrder="",e.prototype.name=null,e.prototype.title=null,e.prototype.comment=null,e.prototype.description=null,e.prototype.removeFromSelect=function(e){var f,n,o,d;return null==e&&(e=[]),e=S.stringList(e),f=S.compose(this.expandStar,this.adjustPath),e=S.flatten(function(){var n,d,i;for(i=[],n=0,d=e.length;d>n;n++)o=e[n],i.push(f(o));return i}()),this.sortOrder=function(){var f,o,d,i,t;for(d=this.sortOrder,t=[],f=0,o=d.length;o>f;f++)n=d[f],i=n.path,_.call(e,i)>=0||t.push(n);return t}.call(this),this.views=function(){var f,n,o,i;for(o=this.views,i=[],f=0,n=o.length;n>f;f++)d=o[f],_.call(e,d)>=0||i.push(d);return i}.call(this),this.trigger("remove:view",e),this.trigger("change:views",this.views),this.trigger("change",this.views)},e.prototype.removeConstraint=function(e,f){var n,o,d,i;if(null==f&&(f=!1),d=this.constraints,o="string"==typeof e?function(f){return f.code===e}:function(f){var n,o;return f.path===e.path&&f.op===e.op&&f.value===e.value&&f.extraValue===e.extraValue&&e.type===f.type&&(null!=(n=f.values)?n.join("%%"):void 0)===(null!=(o=e.values)?o.join("%%"):void 0)},i=function(){var e,f,i;for(i=[],e=0,f=d.length;f>e;e++)n=d[e],o(n)||i.push(n);return i}(),i.length!==d.length-1)throw new Error(g(d,i));return this.constraints=i,f?void 0:(this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",S.find(d,o)))},e.prototype.addToSelect=function(e,f){var n,o,d,i,t,l,u,p;if(null==e&&(e=[]),null==f&&(f={}),e=S.stringList(e),o=S.compose(this.expandStar,this.adjustPath),i=S.flatten(function(){var f,n,d;for(d=[],f=0,n=e.length;n>f;f++)t=e[f],d.push(o(t));return d}()),n=function(){var e,f,n;for(n=[],e=0,f=i.length;f>e;e++)d=i[e],_.call(this.views,d)>=0&&n.push(d);return n}.call(this),n.length)throw new Error(""+n+" already in the select list");if(n=function(){var e,f,n;for(n=[],e=0,f=i.length;f>e;e++)d=i[e],function(){var e,f,n;for(n=[],e=0,f=i.length;f>e;e++)l=i[e],l===d&&n.push(l);return n}().length>1&&n.push(d);return n}(),n.length)throw new Error(""+n+" specified multiple times as arguments to addToSelect");return(u=this.views).push.apply(u,i),f.silent?f.events=(null!=(p=f.events)?p:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",i),this.trigger("change")),this},e.prototype.select=function(e,f){var n,o;o=this.views.slice();try{this.views=[],this.addToSelect(e,f)}catch(d){n=d,this.views=o,S.error(n)}return this},e.prototype.adjustPath=function(e){return e=e&&e.name?e.name:""+e,null!=this.root?e.match("^"+this.root)||(e=this.root+"."+e):this.root=e.split(".")[0],e},e.prototype.getPossiblePaths=function(e,f,n){var o,d,i,t,l;return null==e&&(e=3),null==f&&(f=!0),null==n&&(n=null),t="string"==typeof n?function(e){return e[n]()}:n,o=function(e){return function(n,d){var i,t,l,u,p,s;return p=e.getPathInfo(n),!f&&p.isReverseReference()?[]:p.isAttribute()?[p]:(i=p.getType(),s=r(function(e){return o(""+n+"."+e.name,d-1)}),u=i&&d>0?s(function(){var e,f;e=i.fields,f=[];for(l in e)t=e[l],f.push(t);return f}()):[],[p].concat(u))}}(this),d=""+e+"-"+f,null==this._possiblePaths&&(this._possiblePaths={}),i=(null!=(l=this._possiblePaths)[d]?l[d]:l[d]=o(this.root,e)).slice(),null!=t?i.filter(t):i},e.prototype.getPathInfo=function(e){var f,n,o;return f=this.adjustPath(e),n=null!=(o=this.model)&&"function"==typeof o.getPathInfo?o.getPathInfo(f,this.getSubclasses()):void 0,n&&f in this.displayNames&&(n.displayName=this.displayNames[f]),n},e.prototype.makePath=e.prototype.getPathInfo,m=function(e){return[e.path,e.type]},p=S.compose(S.pairsToObj,S.map(m),x(h("type"))),e.prototype.getSubclasses=function(){return p(this.constraints)},e.prototype.getType=function(e){return this.getPathInfo(e).getType()},e.prototype.getViewNodes=function(){var e,f;return f=function(e){return function(f){return e.getPathInfo(f).getParent()}}(this),S.uniqBy(String,function(){var n,o,d,i;for(d=this.views,i=[],n=0,o=d.length;o>n;n++)e=d[n],i.push(f(e));return i}.call(this))},e.prototype.isInView=function(e){var f,n,o;if(f=this.getPathInfo(e),!f)throw new Error("Invalid path: "+e);return f.isAttribute()?(o=f.toString(),_.call(this.views,o)>=0):(n=f.toString(),S.any(this.getViewNodes(),function(e){return e.toString()===n}))},e.prototype.isConstrained=function(e,f){var n,o;if(null==f&&(f=!1),n=this.getPathInfo(e),!n)throw new Error("Invalid path: "+e);return o=function(e){return null!=e.op&&e.path===n.toString()},!n.isAttribute()&&f&&(o=function(e){return function(f){return null!=f.op&&(f.path===n.toString()||n.equals(e.getPathInfo(f.path).getParent()))}}(this)),S.any(this.constraints,o)},e.prototype.canHaveMultipleValues=function(e){return this.getPathInfo(e).containsCollection()},e.prototype.getQueryNodes=function(){var e,f,n,o;return o=this.getViewNodes(),f=function(){var f,o,d,i;for(d=this.constraints,i=[],f=0,o=d.length;o>f;f++)e=d[f],null==e.type&&(n=this.getPathInfo(e.path),n.isAttribute()?i.push(n.getParent()):i.push(n));return i}.call(this),S.uniqBy(String,o.concat(f))},e.prototype.isInQuery=function(e){var f,n,o,d,i,t;if(n=this.getPathInfo(e)){for(o=n.toPathString(),t=this.views.concat(function(){var e,n,o,d;for(o=this.constraints,d=[],e=0,n=o.length;n>e;e++)f=o[e],
null==f.type&&d.push(f.path);return d}.call(this)),d=0,i=t.length;i>d;d++)if(e=t[d],0===e.indexOf(o))return!0;return!1}return!0},e.prototype.isRelevant=function(e){var f,n,o;return n=this.getPathInfo(e),n.isAttribute()&&(n=n.getParent()),o=n.toString(),f=this.getViewNodes(),S.any(f,function(e){return e.toPathString()===o})},e.prototype.expandStar=function(e){var f,n,o,d,i,t,l,u;if(/\*$/.test(e))if(l=e.substr(0,e.lastIndexOf(".")),o=function(e){return l+e},n=this.getType(l),/\.\*$/.test(e)){if(n&&this.summaryFields[n.name])return d=S.compose(o,b),function(){var e,f,o,t;for(o=this.summaryFields[n.name],t=[],e=0,f=o.length;f>e;e++)i=o[e],this.hasView(i)||t.push(d(i));return t}.call(this)}else if(/\.\*\*$/.test(e))return u=this.expandStar(l+".*"),f=function(){var e;e=[];for(t in n.attributes)e.push(o("."+t));return e}(),S.uniqBy(z,u.concat(f));return e},e.prototype.isOuterJoin=function(e){return"OUTER"===this.joins[this.adjustPath(e)]},e.prototype.hasView=function(e){var f;return this.views&&(f=this.adjustPath(e),_.call(this.views,f)>=0)},e.prototype.count=function(e){if(this.service.count)return this.service.count(this,e);throw new Error("This query has no service with count functionality attached.")},e.prototype.appendToList=function(e,f){var n,o,d,t,l;return(null!=e?e.name:void 0)?(n=e.name,l=function(f,n){return null==f?e.size=n.size:void 0}):(n=String(e),l=null),t=this.makeListQuery(),d={listName:n,query:t.toXML()},o=i(this.service),T(l,f,this.service.post("query/append/tolist",d).then(o))},e.prototype.selectPreservingImpliedConstraints=function(e){var f,n,o,d,i;for(null==e&&(e=[]),n=this.clone(),n.select(e),i=this.getViewNodes(),o=0,d=i.length;d>o;o++)f=i[o],this.isOuterJoined(f)||n.isInView(f||n.isConstrained(f))||null==f.getEndClass().fields.id||n.addConstraint([f.append("id"),"IS NOT NULL"]);return n},e.prototype.makeListQuery=function(){var e,f;return e=this.views.slice(),1===e.length&&(null!=(f=e[0])?f.match(/\.id$/):void 0)||(e=["id"]),this.selectPreservingImpliedConstraints(e)},e.prototype.saveAsList=function(e,f){var n,o;return o=this.makeListQuery(),n=S.copy(e),n.listName=n.listName||n.name,n.query=o.toXML(),e.tags&&(n.tags=e.tags.join(";")),T(f,this.service.post("query/tolist",n).then(i(this.service)))},e.prototype.summarise=function(e,f,n){return this.filterSummary(e,"",f,n)},e.prototype.summarize=function(){var e;return e=1<=arguments.length?fe.call(arguments,0):[],this.summarise.apply(this,e)},t=function(e){var f,n,o,d,i,t,l;for(f=null!=(null!=(t=e.results[0])?t.max:void 0),l=e.results,d=0,i=l.length;i>d;d++)n=l[d],n.count=parseInt(n.count,10);return o={uniqueValues:e.uniqueValues,filteredCount:e.filteredCount},f&&(o=F(o,e.results[0])),e.stats=o,e},e.prototype.filterSummary=function(e,f,n,o){var d,i,l;return null==o&&(o=function(){}),S.isFunction(n)&&(l=[n,null],o=l[0],n=l[1]),e=this.adjustPath(e),i=this.clone(),_.call(i.views,e)<0&&i.views.push(e),d={query:i.toXML(),summaryPath:e,format:"jsonrows"},n&&(d.size=n),f&&(d.filterTerm=f),T(o,this.service.post("query/results",d).then(t))},e.prototype.clone=function(f){var n,o,d,i;if(n=new e(this,this.service),null==n._callbacks&&(n._callbacks={}),f){i=this._callbacks;for(o in i)ne.call(i,o)&&(d=i[o],n._callbacks[o]=d);n.off("change:views",L,this)}return n},e.prototype.next=function(){var e;return e=this.clone(),this.maxRows&&(e.start=this.start+this.maxRows),e},e.prototype.previous=function(){var e;return e=this.clone(),this.maxRows?e.start=this.start-this.maxRows:e.start=0,e},e.prototype.getSortDirection=function(e){var f,n;if(f=this.adjustPath(e),!this.isInQuery(f)&&!this.isRelevant(f))throw new Error(""+e+" is not in the query");return n=S.find(this.sortOrder,function(e){var n;return n=e.path,f===n}),null!=n?n.direction:void 0},e.prototype.isOuterJoined=function(e){var f,n,o;e=this.adjustPath(e),o=this.joins;for(n in o)if(f=o[n],"OUTER"===f&&0===e.indexOf(n))return!0;return!1},e.prototype.getOuterJoin=function(e){var f,n;return e=this.adjustPath(e),f=function(){var e;e=[];for(n in this.joins)e.push(n);return e}.call(this).sort(function(e,f){return f.length-e.length}),S.find(f,function(f){return function(n){return"OUTER"===f.joins[n]&&0===e.indexOf(n)}}(this))},e.prototype._parse_sort_order=function(e){var f,n,o,d,i,t;if(null==e)throw new Error("No input");if("string"==typeof e)d={path:e,direction:"ASC"};else if(S.isArray(e))o=e[0],f=e[1],d={path:o,direction:f};else if(null==e.path){for(n in e)i=e[n],t=[n,i],o=t[0],f=t[1];d={path:o,direction:f}}else o=e.path,f=e.direction,d={path:o,direction:f};return d.path=this.adjustPath(d.path),null==d.direction&&(d.direction="ASC"),d.direction=d.direction.toUpperCase(),d},e.prototype.addOrSetSortOrder=function(e){var f,n;return e=this._parse_sort_order(e),f=this.getSortDirection(e.path),null==f?this.addSortOrder(e):f!==e.direction&&(n=S.find(this.sortOrder,function(f){var n;return n=f.path,n===e.path}),n.direction=e.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},e.prototype.addSortOrder=function(e,f){var n;return n=(null!=f?f:{}).silent,this.sortOrder.push(this._parse_sort_order(e)),n?void 0:(this.trigger("add:sortorder",e),this.trigger("change:sortorder",this.sortOrder),this.trigger("change"))},e.prototype.orderBy=function(e,f){var n,o,d,i,t,l,u,p;for(null==f&&(f={}),i=this.sortOrder.slice(),this.sortOrder=[],l=0,u=e.length;u>l;l++)d=e[l],this.addSortOrder(this._parse_sort_order(d),{silent:!0});return n=function(){var e,f,n,d,i;for(n=this.sortOrder,i=[],e=0,f=n.length;f>e;e++)d=n[e],t=d.path,o=d.direction,i.push({path:t,direction:o});return i}.call(this),this.trigger("set:sortorder",n),O(i)!==this.getSorting()&&(f.silent?f.events=(null!=(p=f.events)?p:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",n),this.trigger("change"))),this},e.prototype.addJoins=function(e){var f,n,o,d,i,t,l;if(S.isArray(e)){for(t=[],d=0,i=e.length;i>d;d++)f=e[d],t.push(this.addJoin(f));return t}l=[];for(n in e)o=e[n],l.push(this.addJoin({path:n,style:o}));return l},e.prototype.addJoin=function(e){return"string"==typeof e&&(e={path:e,style:"OUTER"}),this.setJoinStyle(e.path,e.style)},e.prototype.setJoinStyle=function(f,n){if(null==n&&(n="OUTER"),f=this.adjustPath(f),n=n.toUpperCase(),_.call(e.JOIN_STYLES,n)<0)throw new Error("Invalid join style: "+n);return this.joins[f]!==n&&(this.joins[f]=n,this.trigger("change:joins",{path:f,style:n}),this.trigger("change")),this},e.prototype.addConstraints=function(e,f){var n,o,d,i,t,l,u;if(null==f&&(f="and"),this.__silent__=!0,d=this.constraintLogic,S.isArray(e))for(l=0,u=e.length;u>l;l++)n=e[l],this.addConstraint(n,f);else{t=function(e){return function(n,o){return e.addConstraint(D(n,o),f)}}(this);for(i in e)o=e[i],t(i,o)}return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),d!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},e.prototype.addConstraint=function(e,f){var n,d,i,t,l,u,p;if(null==f&&(f="and"),"and"!==f&&"or"!==f)throw new Error("Unknown logical conjunction: "+f);return e=S.isArray(e)?C(e):w(e),"OFF"===e.switched?this:(e.path=this.adjustPath(e.path),null==e.type&&(e.op=k(e.op)),this.constraints.push(e),i="or"===f||(null!=(p=this.constraintLogic)?p.length:void 0)>0,t=this.constraints.length,u=this.constraintLogic,i&&(l=2===t?""+o[0]+" "+f+" "+o[1]:(d=this.constraintLogic,d||(d=function(){var e,f,d;for(d=[],n=e=0,f=t-2;f>=0?f>=e:e>=f;n=f>=0?++e:--e)d.push(o[n]);return d}().join(" and ")),"("+d+") "+f+" "+o[t-1]),this.constraintLogic=l),this.__silent__||(this.trigger("add:constraint",e),this.trigger("change:constraints"),u!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")),this)},e.prototype.getSorting=function(){return O(this.sortOrder)},e.prototype.getConstraintXML=function(){var e,f;return f=function(){var f,n,o,d;for(o=this.constraints,d=[],f=0,n=o.length;n>f;f++)e=o[f],(null==e.type||this.isInQuery(e.path))&&d.push(e);return d}.call(this),f.length?r(c)(r(z)(K(function(e){return null!=e.type})(f))):""},e.prototype.getJoinXML=function(){var e,f,n;return n=function(){var n,o;n=this.joins,o=[];for(e in n)f=n[e],this.isInQuery(e)&&"OUTER"===f&&o.push('<join path="'+e+'" style="OUTER"/>');return o}.call(this),n.join("")},e.prototype.toXML=function(){var e,f,n,o;return e={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(e.name=this.name),f=function(){var f;f=[];for(n in e)o=e[n],o&&f.push(n+'="'+o+'"');return f}().join(" "),"<query "+f+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},e.prototype.toJSON=function(){var e,f,n,o,d;return I({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var e,f,n,o;for(n=this.views,o=[],e=0,f=n.length;f>e;e++)d=n[e],o.push(q(d));return o}.call(this),orderBy:function(){var e,o,d,i,t;for(d=this.sortOrder,t=[],e=0,o=d.length;o>e;e++)i=d[e],n=i.path,f=i.direction,t.push({path:q(n),direction:f});return t}.call(this),joins:function(){var e,f;e=this.joins,f=[];for(n in e)o=e[n],"OUTER"===o&&f.push(q(n));return f}.call(this),where:function(){var f,n,o,d;for(o=this.constraints,d=[],f=0,n=o.length;n>f;f++)e=o[f],d.push(a(e));return d}.call(this)})},e.prototype.fetchCode=function(e,f){var n;return n={query:this.toXML(),lang:e},T(f,this.service.post("query/code",n).then(this.service.VERIFIER).then(h("code")))},e.prototype.setName=function(e){this.name=e},e.prototype.save=function(e,f){return l(this.service,16,function(n){return function(){var o,d;return S.isFunction(e)&&(d=[null,e],e=d[0],f=d[1]),null!=e&&n.setName(e),o={type:"PUT",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},T(f,n.service.authorise(o)).then(function(e){return n.service.doReq(e)}).then(function(e){return e.queries})}}(this))},e.prototype.store=function(e,f){return l(this.service,16,function(n){return function(){var o,d,i,t;return S.isFunction(e)&&(t=[null,e],e=t[0],f=t[1]),null!=e&&n.setName(e),i=function(e,f){return null==e?n.setName(f):void 0},o=S.compose(h(n.name),h("queries")),d={type:"POST",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},T(f,i,n.service.authorise(d)).then(function(e){return n.service.doReq(e)}).then(o)}}(this))},e.prototype.saveAsTemplate=function(e,f){return l(this.service,16,function(n){return function(){var o,d;if(S.isFunction(e)&&(d=[null,e],e=d[0],f=d[1]),null!=e&&n.setName(e),!n.name)throw new Error("Templates must have a name");return o={type:"POST",path:"templates",data:"<template "+y(n,["name","title","comment"])+">"+n.toXML()+"</template>",contentType:"application/xml",dataType:"json"},T(f,n.service.authorise(o).then(function(e){return n.service.doReq(e)}))}}(this))},e.prototype.getCodeURI=function(e){var f,n;return f={query:this.toXML(),lang:e,format:"text"},null!=(null!=(n=this.service)?n.token:void 0)&&(f.token=this.service.token),""+this.service.root+"query/code?"+P(f)},e.prototype.getExportURI=function(f,n){var o,d;return null==f&&(f="tab"),null==n&&(n={}),_.call(e.BIO_FORMATS,f)>=0?this["get"+f.toUpperCase()+"URI"](n):(o=F(n,{query:this.toXML(),format:f}),null!=(null!=(d=this.service)?d.token:void 0)&&(o.token=this.service.token),""+this.service.root+"query/results?"+P(o))},e.prototype.needsAuthentication=function(){return S.any(this.constraints,function(e){var f;return"NOT IN"===(f=e.op)||"IN"===f})},e.prototype.fetchQID=function(e){return T(e,this.service.post("queries",{query:this.toXML()}).then(h("id")))},f=function(e){return e.append("primaryIdentifier").toString()},e.prototype.__bio_req=function(e,n){var o,d;return d=this.makeListQuery(),o=function(f){return S.any(e,function(e){return f.isa(e)})},d.views=S.take(n)(function(){var e,d,i,t;for(i=this.getViewNodes(),t=[],e=0,d=i.length;d>e;e++)n=i[e],o(n)&&t.push(f(n));return t}.call(this)),{query:d.toXML(),format:"text"}},e.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},e.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},e.prototype._bed_req=e.prototype._gff3_req,e}(),R=v(function(e,f){return e.concat(f)}),t.prototype.toString=t.prototype.toXML,t.ATTRIBUTE_OPS=R([t.ATTRIBUTE_VALUE_OPS,t.MULTIVALUE_OPS,t.NULL_OPS]),t.REFERENCE_OPS=R([t.TERNARY_OPS,t.LOOP_OPS,t.LIST_OPS]),s=function(e,f){return function(n,o){var d,i,t,l,u;return null==n&&(n={}),null==o&&(o=function(){}),S.isFunction(n)&&(u=[{},n],n=u[0],o=u[1]),d=function(e){return function(f){var n;return n=e.getPathInfo(f),n.isAttribute()?n:n.append("id")}}(this),null!=(null!=n?n.view:void 0)&&(n.view=function(){var e,f,o,d;for(o=n.view,d=[],e=0,f=o.length;f>e;e++)l=o[e],d.push(this.getPathInfo(l).toString());return d}.call(this)),i=null!=n["export"]?this.selectPreservingImpliedConstraints(n["export"].map(d)):this,t=F(i[e](),n),f.call(i,t,o)}},$=t.BIO_FORMATS,U=function(e){var f,n,o;return n="_"+e+"_req",f="get"+e.toUpperCase(),o=f+"URI",t.prototype[f]=s(n,function(f,n){return T(n,this.service.post("query/results/"+e,f))}),t.prototype[o]=s(n,function(f,n){return null!=this.service.token&&(f.token=this.service.token),""+this.service.root+"query/results/"+e+"?"+P(f)})};for(W=0,Y=$.length;Y>W;W++)j=$[W],U(j);for(V=function(e){return function(){var f,n,o,d;if(n=arguments[0],f=2<=arguments.length?fe.call(arguments,1):[],this.service[e])return null==n?n={}:S.isFunction(n)&&(n={},f=function(){var e,f,n;for(n=[],e=0,f=arguments.length;f>e;e++)o=arguments[e],n.push(o);return n}.apply(this,arguments)),n=I(F({start:this.start,size:this.maxRows},n)),(d=this.service)[e].apply(d,[this,n].concat(fe.call(f)));throw new Error("Service does not provide '"+e+"'.")}},X=0,Z=u.length;Z>X;X++)G=u[X],t.prototype[G]=V(G);d.mixin(t.prototype),t.prototype.emit=t.prototype.trigger,t.prototype.bind=t.prototype.on,B.Query=t}).call(this)},{"./util":15,"./xml":17,"backbone-events-standalone":23}],10:[function(e,f,n){(function(){var f,o,d,i,t,l,u,p,s,y,c,a,m,r,w,b,g,j,x,v,h,k,q,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ee,fe,ne,oe,de,ie,te,le,ue,pe,se,ye,ce,ae,me=function(e,f){return function(){return e.apply(f,arguments)}},re={}.hasOwnProperty,we=[].slice;for(k=e("./promise"),g=e("./model").Model,A=e("./query").Query,r=e("./lists").List,N=e("./user").User,s=e("./id-resolution-job").IDResolutionJob,ie=e("./version"),de=e("./util"),Y=e("./http"),oe=de.querystring,te=de.withCB,$=de.map,_=de.merge,W=de.get,fe=de.set,Z=de.invoke,ne=de.success,V=de.error,D=de.REQUIRES_VERSION,U=de.dejoin,O={},o={},B={},w={},H={},R={},t="http://",P="version",K="templates",C="version/release",d="classkeys",c="lists",b="model",G="summaryfields",q="query/results",z="search",S="widgets",l="list/enrichment",T="listswithobject",a={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},E="lists/subtract",Q="user/whoami",J=q+"/tablerows",h="user/preferences",v="path/values",M="user/tokens",y="ids",x={},ce=[P,C,d,S,b,G,z,v],ue=0,se=ce.length;se>ue;ue++)ee=ce[ue],x[ee]=!0;for(f={},ae=[Q,h,a,E,T,l,K,M],pe=0,ye=ae.length;ye>pe;pe++)ee=ae[pe],f[ee]=!0;j=function(e,n){return x[e]?!1:f[e]?!0:(null!=n?n.needsAuthentication:void 0)?n.needsAuthentication():!0},u=/^https?:\/\//i,p=/service\/?$/i,F="/service/",i=function(e){var f,n;return(f=null!=(n=console.error)?n:console.log)(e)},le=function(e,f,n,o,d){var i,t,l,u,p;return l=this.root,u=this.useCache,t=null!=this[e]?this[e]:this[e]=u&&(p=f[l])?ne(p):(i={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(_(i,{url:this.root+n})).then(function(e){return f[l]=e[o]})),te(d,t)},X=function(e){return function(f){return new k(function(n,o){var d;return(d=de.find(f,function(f){return f.name===e}))?n(d):o('List "'+e+'" not found among: '+f.map(W("name")))})}},m=function(e,f){return null==f&&(f="listName"),de.compose(e.fetchList,W(f))},L=function(e){var f,n,o,d,i,t;for(null==e&&(e=[]),d=de.isArray(e)?e:[e],t=[],n=0,o=d.length;o>n;n++)f=d[n],t.push(null!=(i=f.name)?i:f);return t},I=function(){function e(e){var f;if(this.root=e.root,this.token=e.token,this.errorHandler=e.errorHandler,this.DEBUG=e.DEBUG,this.help=e.help,f=e.noCache,this.headers=e.headers,this.connectAs=me(this.connectAs,this),this.createList=me(this.createList,this),this.resolveIds=me(this.resolveIds,this),this.templateQuery=me(this.templateQuery,this),this.savedQuery=me(this.savedQuery,this),this.query=me(this.query,this),this.fetchRelease=me(this.fetchRelease,this),this.fetchClassKeys=me(this.fetchClassKeys,this),this.fetchVersion=me(this.fetchVersion,this),this.fetchSummaryFields=me(this.fetchSummaryFields,this),this.fetchModel=me(this.fetchModel,this),this.fetchWidgetMap=me(this.fetchWidgetMap,this),this.fetchWidgets=me(this.fetchWidgets,this),this.complement=me(this.complement,this),this.fetchListsContaining=me(this.fetchListsContaining,this),this.fetchList=me(this.fetchList,this),this.findLists=me(this.findLists,this),this.fetchLists=me(this.fetchLists,this),this.fetchTemplates=me(this.fetchTemplates,this),this.tableRows=me(this.tableRows,this),this.values=me(this.values,this),this.rows=me(this.rows,this),this.records=me(this.records,this),this.table=me(this.table,this),this.pathValues=me(this.pathValues,this),this.fetchUser=me(this.fetchUser,this),this.whoami=me(this.whoami,this),this.findById=me(this.findById,this),this.count=me(this.count,this),this.enrichment=me(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");u.test(this.root)||(this.root=t+this.root),p.test(this.root)||(this.root=this.root+F),this.root=this.root.replace(/ice$/,"ice/"),null==this.headers&&(this.headers=null),null==this.errorHandler&&(this.errorHandler=i),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!f,this.getFormat=function(e){return function(e){return null==e&&(e="json"),e}}(this)}var f,n,x,k,I,M;return e.prototype.doReq=function(){return arguments[0]=this.attachCustomHeaders(arguments[0]),Y.doReq.apply(this,arguments)},e.prototype.post=function(e,f){return this.makeRequest("POST",e,f)},e.prototype.get=function(e,f){return this.makeRequest("GET",e,f)},e.prototype.makeRequest=function(e,f,n,o,d){var i,t,l,u,p,s,y;return null==e&&(e="GET"),null==f&&(f=""),null==n&&(n={}),null==o&&(o=function(){}),null==d&&(d=!1),de.isArray(o)&&(p=o,o=p[0],t=p[1]),de.isArray(n)&&(n=de.pairsToObj(n)),null==t&&(t=this.errorHandler),n=de.copy(n),i=this.getFormat(n.format),Y.supports(e)||(s=[e,Y.getMethod(e)],n.method=s[0],e=s[1]),l={data:n,dataType:i,success:o,error:t,path:f,type:e},null!=n.auth&&(l.auth=n.auth,delete l.data.auth),null!=n.headers&&(l.headers=de.copy(n.headers),delete l.data.headers),(u=null!=(y=n.timeout)?y:this.timeout)&&(l.timeout=u,delete n.timeout),this.authorise(l).then(function(e){return function(f){return e.doReq(f,d)}}(this))},e.prototype.authorise=function(e){return this.fetchVersion().then(function(f){return function(n){var o,d,i;return o=de.copy(e),null==o.headers&&(o.headers={}),o.url=f.root+o.path,d=[],14>n&&("string"==typeof o.data?d.push(["format",o.dataType]):o.data.format=o.dataType),null!=f.token&&j(e.path,null!=(i=o.data)?i.query:void 0)&&(n>=14?o.headers.Authorization="Token "+f.token:"string"==typeof o.data?d.push(["token",f.token]):o.data.token=f.token),d.length&&(o.url+="?"+oe(d)),o}}(this))},e.prototype.attachCustomHeaders=function(e){var f;return null!=this.headers?(f=de.copy(e),f.headers=de.merge(f.headers,this.headers),f):e},e.prototype.enrichment=function(e,f){return D(this,8,function(n){return function(){var o;return o=_({maxp:.05,correction:"Holm-Bonferroni"},e),te(f,n.get(l,o).then(W("results")))}}(this))},e.prototype.search=function(e,f){return null==e&&(e={}),null==f&&(f=function(){}),D(this,9,function(n){return function(){var o,d,i,t;if(de.isFunction(e)&&(t=[e,{}],f=t[0],e=t[1]),"string"==typeof e)d={q:e};else{d={q:e.q,start:e.start,size:e.size};for(o in e)re.call(e,o)&&(i=e[o],"q"!==o&&"start"!==o&&"size"!==o&&(d["facet_"+o]=i))}return te(f,n.post(z,d))}}(this))},e.prototype.makePath=function(e,f,n){return null==f&&(f={}),null==n&&(n=function(){}),te(n,this.fetchModel().then(function(n){return n.makePath(e,f)}))},e.prototype.count=function(e,f){var n,o;return null==f&&(f=function(){}),n=e?null!=e.toPathString?(ee=e.isClass()?e.append("id"):e,this.pathValues(ee,"count")):null!=e.toXML?(o={query:e,format:"jsoncount"},this.post(q,o).then(W("count"))):"string"==typeof e?this.fetchModel().then(function(f){return function(n){var o;try{return f.count(n.makePath(e))}catch(d){return o=d,f.query({select:[e]}).then(f.count)}}}(this)):this.query(e).then(this.count):V("Not enough arguments"),te(f,n)},e.prototype.findById=function(e,f,n,o){var d,i;return null==n&&(n=["**"]),null==o&&(o=function(){}),de.isFunction(n)&&(i=[["**"],n],n=i[0],o=i[1]),d=this.query({from:e,select:n,where:{id:f}}).then(U).then(Z("records")).then(W(0)),te(o,d)},e.prototype.lookup=function(e,f,n,o){var d,i;return de.isFunction(n)&&(i=[null,n],n=i[0],o=i[1]),d=this.query({from:e,select:["**"],where:[[e,"LOOKUP",f,n]]}).then(U).then(Z("records")),te(o,d)},e.prototype.find=function(e,f,n,o){var d;return de.isFunction(n)&&(d=[null,n],n=d[0],o=d[1]),te(o,this.lookup(e,f,n).then(function(e){return null==e||0===e.length?V("Nothing found"):e.length>1?V("Multiple items found: "+e.slice(0,3)+"..."):ne(e[0])}))},e.prototype.whoami=function(e){return D(this,9,function(f){return function(){return te(e,f.get(Q).then(W("user")).then(function(e){return new N(f,e)}))}}(this))},e.prototype.fetchUser=function(){var e;return e=1<=arguments.length?we.call(arguments,0):[],this.whoami.apply(this,e)},I=function(e,f){return{format:e,path:String(f),typeConstraints:JSON.stringify(f.subclasses)}},e.prototype.pathValues=function(e,f,n){return null==f&&(f={}),D(this,6,function(o){return function(){var d,i,t,l,u;return"string"==typeof f&&(l=f,f={}),de.isFunction(f)&&(u=[n,f],f=u[0],n=u[1]),"count"!==l&&(l="results"),i="count"===l?"jsoncount":"json",t=function(){var n;try{return this.fetchModel().then(Z("makePath",e,null!=(n=e.subclasses)?n:f)).then(function(e){return I(i,e)}).then(function(e){return function(f){return e.post(v,f)}}(this)).then(W(l))}catch(o){return d=o,V(d)}}.call(o),te(n,t)}}(this))},e.prototype.doPagedRequest=function(e,f,n,o,d){var i,t;return null==n&&(n={}),null==d&&(d=function(){}),null!=e.toXML?(de.isFunction(n)&&(t=[n,{}],d=t[0],n=t[1]),i=_(n,{query:e,format:o}),te(d,this.post(f,i).then(W("results")))):this.query(e).then(function(e){return function(i){return e.doPagedRequest(i,f,n,o,d)}}(this))},e.prototype.table=function(e,f,n){return this.doPagedRequest(e,q,f,"jsontable",n)},e.prototype.records=function(e,f,n){return this.doPagedRequest(e,q,f,"jsonobjects",n)},e.prototype.rows=function(e,f,n){return this.doPagedRequest(e,q,f,"json",n)},e.prototype.values=function(e,f,n){var o,d;return de.isFunction(f)&&(d=[f,n],n=d[0],f=d[1]),o=null==e?V("No query term supplied"):null!=e.descriptors||"string"==typeof e?this.pathValues(e,f).then($(W("value"))):null!=e.toXML?1!==e.views.length?V("Expected one column, got "+e.views.length):this.rows(e,f).then($(W(0))):this.query(e).then(function(e){return function(n){return e.values(n,f)}}(this)),te(n,o)},e.prototype.tableRows=function(e,f,n){return this.doPagedRequest(e,J,f,"json",n)},e.prototype.fetchTemplates=function(e){return te(e,this.get(K).then(W("templates")))},e.prototype.fetchLists=function(e){return this.findLists("",e)},e.prototype.findLists=function(e,f){return null==e&&(e=""),null==f&&(f=function(){}),this.fetchVersion().then(function(n){return function(o){var d;return te(f,e&&13>o?V("Finding lists by name on the server requires version 13. This is only "+o):(d=function(e){var f,o,d,i;for(i=[],o=0,d=e.length;d>o;o++)f=e[o],i.push(new r(f,n));return i},n.get(c,{name:e}).then(W("lists")).then(d)))}}(this))},e.prototype.fetchList=function(e,f){return this.fetchVersion().then(function(n){return function(o){return te(f,13>o?n.findLists().then(X(e)):n.findLists(e).then(W(0)))}}(this))},e.prototype.fetchListsContaining=function(e,f){var n;return n=function(e){return function(f){var n,o,d,i;for(i=[],o=0,d=f.length;d>o;o++)n=f[o],i.push(new r(n,e));return i}}(this),te(f,this.get(T,e).then(W("lists")).then(n))},e.prototype.combineLists=function(e,f,n){var o,d,i,t,l,u;return u=_({lists:[],tags:[]},f),i=u.name,d=u.lists,l=u.tags,o=u.description,t={name:i,description:o},null==t.description&&(t.description=""+e+" of "+d.join(", ")),t.tags=l.join(";"),t.lists=d.join(";"),te(n,this.get(a[e],t).then(m(this)))},e.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(we.call(arguments)))},e.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(we.call(arguments)))},e.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(we.call(arguments)))},e.prototype.complement=function(e,f){var n,o,d,i,t,l,u,p,s;return null==e&&(e={}),null==f&&(f=function(){}),i=e.from,d=e.exclude,l=e.name,o=e.description,s=e.tags,n=function(){return"Relative complement of "+t.join(" and ")+" in "+u.join(" and ")},u=L(i),t=L(d),null==l&&(l=n()),null==o&&(o=n()),null==s&&(s=[]),p={name:l,description:o,tags:s,lists:t,references:u},te(f,this.post(E,p).then(m(this)))},e.prototype.fetchWidgets=function(e){return D(this,8,function(f){return function(){return le.call(f,"widgets",R,S,"widgets",e)}}(this))},M=de.omap(function(e){return[e.name,e]}),e.prototype.fetchWidgetMap=function(e){return D(this,8,function(f){return function(){return te(e,null!=f.__wmap__?f.__wmap__:f.__wmap__=f.fetchWidgets().then(M))}}(this))},e.prototype.fetchModel=function(e){var f;return f=le.call(this,"model",w,b,"model").then(g.load).then(fe({service:this})),te(e,f)},e.prototype.fetchSummaryFields=function(e){return le.call(this,"summaryFields",H,G,"classes",e)},e.prototype.fetchVersion=function(e){return le.call(this,"version",O,P,"version",e)},e.prototype.fetchClassKeys=function(e){return le.call(this,"classkeys",o,d,"classes",e)},e.prototype.fetchRelease=function(e){return le.call(this,"release",B,C,"version",e)},e.prototype.query=function(e,f){var n;return n=function(f){return function(n){var o,d;return o=n[0],d=n[1],new A(e,f,{model:o,summaryFields:d})}}(this),te(f,de.parallel(this.fetchModel(),this.fetchSummaryFields()).then(n))},k=function(e,f){return function(n){return n?e.query(n):V("No query found called "+f)}},n=function(e){return e?"string"==typeof e?ne():V("Name must be a string"):V("Name not provided")},e.prototype.savedQuery=function(e,f){return D(this,16,function(o){return function(){return n(e).then(function(){return te(f,o.get("user/queries",{filter:e}).then(function(f){return f.queries[e]}).then(k(o,e)))})}}(this))},e.prototype.templateQuery=function(e,f){return n(e).then(function(n){return function(){return te(f,n.fetchTemplates().then(W(e)).then(fe("type","TEMPLATE")).then(k(n,e)))}}(this))},e.prototype.manageUserPreferences=function(e,f,n){return D(this,11,function(o){return function(){return te(n,o.makeRequest(e,h,f).then(W("preferences")))}}(this))},e.prototype.resolveIds=function(e,f){return D(this,10,function(n){return function(){var o;return o={type:"POST",url:n.root+y,contentType:"application/json",data:JSON.stringify(e),dataType:"json"},te(f,n.doReq(o).then(W("uid")).then(s.create(n)))}}(this))},e.prototype.resolutionJob=function(e){return s.create(this)(e)},e.prototype.createList=function(e,f,n){var o,d;return null==e&&(e={}),null==f&&(f=""),null==n&&(n=function(){}),o=function(f){return function(n){return _(n,{token:f.token,tags:e.tags||[]})}}(this),d={data:de.isArray(f)?f.map(function(e){return'"'+e+'"'}).join("\n"):f,dataType:"json",url:""+this.root+"lists?"+oe(o(e)),type:"POST",contentType:"text/plain"},te(n,this.doReq(d).then(m(this)))},x=function(e){return e.user.temporaryToken},e.prototype.connectAs=function(f){return e.connect(_(this,{token:f,noCache:!this.useCache}))},e.prototype.register=function(e,f,n){return D(this,9,function(o){return function(){return te(n,o.post("users",{name:e,password:f}).then(x).then(o.connectAs))}}(this))},f=300,e.prototype.getDeregistrationToken=function(e,n){return null==e&&(e=f),D(this,16,function(f){return function(){var o;return o=null!=f.token?f.post("user/deregistration",{validity:e}).then(W("token")):V("Not registered"),te(n,o)}}(this))},e.prototype.deregister=function(e,f){return D(this,16,function(n){return function(){return te(f,n.makeRequest("DELETE","user",{deregistrationToken:e,format:"xml"}))}}(this))},e.prototype.login=function(e,f,n){return D(this,9,function(o){return function(){var d;return d=""+e+":"+f,te(n,o.logout().then(function(e){return e.get("user/token",{auth:d})})).then(W("token")).then(o.connectAs)}}(this))},e.prototype.logout=function(e){return te(e,ne(this.connectAs()))},e}(),I.prototype.rowByRow=function(){var e,f,n;return n=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],f=Y.iterReq("POST",q,"json"),null!=n.toXML?f.apply(this,arguments):this.query(n).then(function(f){return function(n){return f.rowByRow.apply(f,[n].concat(we.call(e)))}}(this))},I.prototype.eachRow=I.prototype.rowByRow,I.prototype.recordByRecord=function(){var e,f,n;return n=arguments[0],e=2<=arguments.length?we.call(arguments,1):[],f=Y.iterReq("POST",q,"jsonobjects"),null!=n.toXML?f.apply(this,arguments):this.query(n).then(function(f){return function(n){return f.recordByRecord.apply(f,[n].concat(we.call(e)))}}(this))},I.prototype.eachRecord=I.prototype.recordByRecord,I.prototype.union=I.prototype.merge,I.prototype.difference=I.prototype.diff,I.prototype.symmetricDifference=I.prototype.diff,I.prototype.relativeComplement=I.prototype.complement,I.prototype.subtract=I.prototype.complement,I.flushCaches=function(){return w={},O={},B={},o={},H={},R={}},I.connect=function(e){if(null==(null!=e?e.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(e));return new I(e)},n.Service=I,n.Model=g,n.Query=A,n.utils=de,n.VERSION=ie.VERSION,n.imjs=ie}).call(this)},{"./http":3,"./id-resolution-job":4,"./lists":5,"./model":6,"./promise":8,"./query":9,"./user":14,"./util":15,"./version":16}],11:[function(e,f,n){(function(e){(function(){var f;n.DOMParser=null!=e.DOMParser?e.DOMParser:f=function(){function e(){throw new Error("DOMParser is not available")}return e}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,f,n){(function(){var e,f,n,o,d,i,t,l,u,p,s,y;if(e="undefined"!=typeof console,f="undefined"!=typeof JSON,n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f||(l=document.createElement("script"),l.src="http://cdn.intermine.org/js/json3/3.2.2/json3.min.js",l.type="text/javascript",i=document.getElementsByTagName("head")[0],i.appendChild(l)),null==Object.keys&&(d=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),Object.keys=function(e){var f,i,t,l,u;if("object"!=typeof e&&""!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");if(f=function(){var f;f=[];for(i in e)d.call(e,i)&&f.push(i);return f}(),o)for(l=0,u=n.length;u>l;l++)t=n[l],d.call(e,t)&&f.push(t);return f}),null==Array.prototype.map&&(Array.prototype.map=function(e){var f,n,o,d;for(d=[],n=0,o=this.length;o>n;n++)f=this[n],d.push(e(f));return d}),null==Array.prototype.filter&&(Array.prototype.filter=function(e){var f,n,o,d;for(d=[],n=0,o=this.length;o>n;n++)f=this[n],e(f)&&d.push(f);return d}),null==Array.prototype.reduce&&(Array.prototype.reduce=function(e,f){var n,o,d,i,t;for(d=this.slice(),n=arguments.length<2?d.pop():f,i=0,t=d.length;t>i;i++)o=d[i],n=e(n,o);return n}),null==Array.prototype.forEach&&(Array.prototype.forEach=function(e,f){var n,o,d,i,t;if(!e)throw new Error("No function provided");for(t=[],n=d=0,i=this.length;i>d;n=++d)o=this[n],t.push(e.call(null!=f?f:this,o,n,this));
return t}),e||(this.console={log:function(){},error:function(){},debug:function(){}},"undefined"!=typeof window&&null!==window&&(window.console=this.console)),null==console.log&&(console.log=function(){}),null==console.error&&(console.error=function(){}),null==console.debug&&(console.debug=function(){}),null==console.log.apply)for(console.log("Your console needs patching."),y=["log","error","debug"],u=function(e){var f;return f=console[e],console[e]=function(e){return f(e)}},p=0,s=y.length;s>p;p++)t=y[p],u(t)}).call(this)},{}],13:[function(e,f,n){(function(){var f,o,d,i=function(e,f){return function(){return e.apply(f,arguments)}};o=function(e,f){var n,o,d;d=[];for(n in e)o=e[n],d.push(f[n]=o);return d},f=e("./promise"),d=["attributes","references","collections"],n.Table=function(){function e(e,f){var n,t,l,u,p,s,y;for(this.model=f,this.getDisplayName=i(this.getDisplayName,this),this.name=e.name,this.tags=e.tags,this.displayName=e.displayName,this.attributes=e.attributes,this.references=e.references,this.collections=e.collections,this.fields={},this.__parents__=null!=(s=e["extends"])?s:[],u=0,p=d.length;p>u;u++){if(t=d[u],null==this[t])throw new Error("Bad model data: missing "+t);o(this[t],this.fields)}y=this.collections;for(l in y)n=y[l],n.isCollection=!0}return e.prototype.toString=function(){var e,f;return"[Table name="+this.name+", fields=["+function(){var n,o;n=this.fields,o=[];for(e in n)f=n[e],o.push(e);return o}.call(this)+"]]"},e.prototype.parents=function(){var e;return(null!=(e=this.__parents__)?e:[]).slice()},e.prototype.getDisplayName=function(){return new f(function(e){return function(f,n){return null!=e.model?f(e.model.makePath(e.name).getDisplayName()):n(new Error("model not set - cannot make path"))}}(this))},e}()}).call(this)},{"./promise":8}],14:[function(e,f,n){(function(){var f,o,d,i,t,l,u,p=function(e,f){return function(){return e.apply(f,arguments)}};u=e("./util"),l=u.withCB,i=u.get,t=u.isFunction,f=u.any,d=u.error,o=function(e,f,n,o){return e.service.manageUserPreferences(n,f,o).then(function(f){return e.preferences=f})},n.User=function(){function e(e,f){this.service=e,this.username=f.username,this.preferences=f.preferences,this.refresh=p(this.refresh,this),this.clearPreferences=p(this.clearPreferences,this),this.clearPreference=p(this.clearPreference,this),this.setPreferences=p(this.setPreferences,this),this.setPreference=p(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}return e.prototype.setPreference=function(e,f,n){var o,i;if(t(f)&&(i=[null,f],f=i[0],n=i[1]),"string"==typeof e)o={},o[e]=f;else{if(null!=f)return l(n,d("Incorrect arguments to setPreference"));o=e}return this.setPreferences(o,n)},e.prototype.setPreferences=function(e,f){return o(this,e,"POST",f)},e.prototype.clearPreference=function(e,f){return o(this,{key:e},"DELETE",f)},e.prototype.clearPreferences=function(e){return o(this,{},"DELETE",e)},e.prototype.refresh=function(e){return o(this,{},"GET",e)},e.prototype.createToken=function(e,n,o){var d,u;return null==e&&(e="day"),null==o&&f([e,n],t)&&(t(e)?(d=[null,null,e],e=d[0],n=d[1],o=d[2]):t(n)&&(u=[null,n],n=u[0],o=u[1])),l(o,this.service.post("user/tokens",{type:e,message:n}).then(i("token")))},e.prototype.fetchCurrentTokens=function(e){return l(e,this.service.get("user/tokens").then(i("tokens")))},e.prototype.revokeAllTokens=function(e){return l(e,this.service.makeRequest("DELETE","user/tokens"))},e.prototype.revokeToken=function(e,f){return l(f,this.service.makeRequest("DELETE","user/tokens/"+e))},e}()}).call(this)},{"./util":15}],15:[function(e,f,n){(function(){var f,o,d,i,t,l,u,p,s,y,c,a,m,r,w,b,g,j,x,v,h=[].slice,k=[].indexOf||function(e){for(var f=0,n=this.length;n>f;f++)if(f in this&&this[f]===e)return f;return-1},q={}.hasOwnProperty;f=e("./promise"),g=n,g.defer=function(){var e;return e={},e.promise=new f(function(f,n){return e.resolve=f,e.reject=n}),e},t=function(e){return encodeURIComponent(String(e))},b=function(e){var f;return function(){var n,o,d;for(d=[],n=0,o=e.length;o>n;n++)f=e[n],d.push(f.map(t).join("="));return d}().join("&")},g.querystring=function(e){var f,n,o,d,i,t;if(!e)return"";if(m(e))o=e.slice();else{o=[];for(f in e)t=e[f],m(t)?(d=function(){var e,n,o;for(o=[],e=0,n=t.length;n>e;e++)i=t[e],o.push([f,i]);return o}(),o=o.concat(d)):o.push([f,t])}return b(function(){var e,f,d;for(d=[],e=0,f=o.length;f>e;e++)n=o[e],null!=n[1]&&d.push(n);return d}())},g.curry=i=function(){var e,f;return f=arguments[0],e=2<=arguments.length?h.call(arguments,1):[],function(){var n;return n=1<=arguments.length?h.call(arguments,0):[],f.apply(null,e.concat(n))}},g.error=u=function(e){return new f(function(f,n){return n(new Error(e))})},g.success=j=function(e){return new f(function(f,n){return f(e)})},g.parallel=function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],1===e.length&&!e[0].then&&e[0].length?f.all(e[0]):f.all(e)},g.withCB=function(){var e,f,n,o,d,t,l,u;for(f=2<=arguments.length?h.call(arguments,0,t=arguments.length-1):(t=0,[]),d=arguments[t++],l=0,u=f.length;u>l;l++)e=f[l],null!=e&&(o=i(e,null),n=e,d.then(o,n));return d},g.fold=s=function(e){return function(f,n){var o,d,i;if(1===arguments.length&&(n=(null!=f?f.slice():void 0)||f,f=(null!=n?n.shift():void 0)||{}),null==n)throw new Error("xs is null");if(null!=n.reduce)return n.reduce(e,f);d=f;for(o in n)i=n[o],d=null!=d?e(d,o,i):{k:i};return d}},g.take=function(e){return function(f){return null!=e?f.slice(0,+(e-1)+1||9e9):f.slice()}},g.filter=function(e){return function(f){var n,o,d,i;for(i=[],o=0,d=f.length;d>o;o++)n=f[o],e(n)&&i.push(n);return i}},g.uniqBy=function(e,f){var n,o,d,t,l,u;if(1===arguments.length)return i(g.uniqBy,e);if(o=[],d=[],null==f)return d;for(l=0,u=f.length;u>l;l++)t=f[l],n=e(t),k.call(o,n)<0&&(o.push(n),d.push(t));return d},g.find=function(e,f){var n,o,d;if(1===arguments.length)return f=e,function(e){return g.find(e,f)};for(o=0,d=e.length;d>o;o++)if(n=e[o],f(n))return n;return null},m=null!=(v=Array.isArray)?v:function(e){return null!=(null!=e?e.splice:void 0)&&null!=(null!=e?e.push:void 0)&&null!=(null!=e?e.pop:void 0)&&null!=(null!=e?e.slice:void 0)},g.isArray=m,g.isFunction="function"!=typeof/./?function(e){return"function"==typeof e}:function(e){return null!=e&&null!=e.call&&null!=e.apply&&"[object Function]"===e.toString()},l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},g.escape=function(e){var f,n,o,d,i,t;if(null==e)return"";for(d=String(e).replace(/[&<>"']/g,function(e){return l[e]}),o=[],n=i=0,t=d.length;t>=0?t>=i:i>=t;n=t>=0?++i:--i)f=d.charCodeAt(n),f>256?o.push("&#"+f+";"):o.push(d.charAt(n));return o.join("")},g.omap=function(e){var f;return f=s(function(f,n,o){var d,i,t;return t=e(n,o),d=t[0],i=t[1],m(i)&&(i=i.slice()),f[d]=i,f}),function(e){return f({},e)}},g.copy=g.omap(function(e,f){return[e,f]}),g.partition=function(e){return function(f){var n;return(n=s(function(f,n){var o,d;return d=f[0],o=f[1],e(n)?[d.concat([n]),o]:[d,o.concat([n])]}))([[],[]],f)}},g.merge=function(e,f){return extend(extend({},e),f)},g.extend=function(e,f){var n,o,d;d=[];for(n in f)o=f[n],d.push(e[n]=o);return d},g.id=y=function(e){return e},g.concatMap=function(e){return function(f){var n,o,d,i,t;for(o=void 0,i=0,t=f.length;t>i;i++)d=f[i],n=e(d),o=void 0===o?n:"number"==typeof o?o+n:null!=o.concat?o.concat(n):r(o,n);return o}},g.map=function(e){return c("map",e)},d=s(function(e,f){return function(){var n;return n=1<=arguments.length?h.call(arguments,0):[],e(f.apply(null,n))}}),g.compose=function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],d(e)},g.flatMap=g.concatMap,g.difference=function(e,f){var n,o,d,i;for(i=[],o=0,d=e.length;d>o;o++)n=e[o],k.call(f,n)<0&&i.push(n);return i},g.stringList=function(e){return"string"==typeof e?[e]:e},g.flatten=p=function(){var e,f,n,o,d,i,t,l,u;for(n=1<=arguments.length?h.call(arguments,0):[],e=[],d=0,t=n.length;t>d;d++)if(f=n[d],m(f))for(u=p.apply(null,f),i=0,l=u.length;l>i;i++)o=u[i],e.push(o);else e.push(f);return e},g.sum=g.concatMap(y),g.merge=r=function(){var e,f,n,o,d,i,t;for(o=1<=arguments.length?h.call(arguments,0):[],f={},i=0,t=o.length;t>i;i++){n=o[i];for(e in n)q.call(n,e)&&(d=n[e],f[e]=d)}return f},g.any=function(e,f){var n,o,d;for(null==f&&(f=y),o=0,d=e.length;d>o;o++)if(n=e[o],f(n))return!0;return!1},g.invoke=c=function(){var e,f;return f=arguments[0],e=2<=arguments.length?h.call(arguments,1):[],a(f,e)},g.invokeWith=a=function(e,f,n){return null==f&&(f=[]),null==n&&(n=null),function(o){if(null==o)throw new Error('Cannot call method "'+e+'" of null');if(o[e])return o[e].apply(n||o,f);throw new Error('Cannot call undefined method "'+e+" of "+o)}},g.get=function(e){return function(f){return f[e]}},g.set=function(e,f){return function(n){var o,d;if(2===arguments.length)n[e]=f;else for(o in e)q.call(e,o)&&(d=e[o],n[o]=d);return n}},o=function(e,f){return"This service requires a service at version "+e+" or above. This one is at "+f},g.REQUIRES_VERSION=function(e,f,n){return e.fetchVersion().then(function(e){return e>=f?n():u(o(f,e))})},g.dejoin=function(e){var f,n,o,d,i;for(i=e.views,o=0,d=i.length;d>o;o++)n=i[o],f=n.split("."),f.length>2&&e.addJoin(f.slice(1,-1).join("."));return e},x=s(function(e,f){return e.then(f)}),g.sequence=function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],x(j(),e)},w=s(function(e,f){var n,o;if(n=f[0],o=f[1],null!=e[n])throw new Error("Duplicate key: "+n);return e[n]=o,e}),g.pairsToObj=function(e){return w({},e)}}).call(this)},{"./promise":8}],16:[function(e,f,n){(function(){n.VERSION="3.15.1"}).call(this)},{}],17:[function(e,f,n){(function(){var f,o;f=e("xmldom").DOMParser,o=function(e){return e=e.replace(/^\s*/g,""),e=e.replace(/\s$/g,""),0===e.length?e:">"!==e[e.length-1]?e+">":e},n.parse=function(e){var n,d;if("string"!=typeof e)throw new Error("Expected a string - got "+e);if(e=o(e),!e)throw new Error("Expected content - got empty string");if(n=function(){try{return d=new f,d.parseFromString(e,"text/xml")}catch(n){}}(),!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+e);return n}}).call(this)},{xmldom:11}],18:[function(e,f,n){!function(){function e(e){this.message=e}var f="undefined"!=typeof n?n:this,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",f.btoa||(f.btoa=function(f){for(var n,d,i=0,t=o,l="";f.charAt(0|i)||(t="=",i%1);l+=t.charAt(63&n>>8-i%1*8)){if(d=f.charCodeAt(i+=.75),d>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|d}return l}),f.atob||(f.atob=function(f){if(f=f.replace(/=+$/,""),f.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,d,i=0,t=0,l="";d=f.charAt(t++);~d&&(n=i%4?64*n+d:d,i++%4)?l+=String.fromCharCode(255&n>>(-2*i&6)):0)d=o.indexOf(d);return l})}()},{}],19:[function(e,f,n){(function(o,d){function i(e,f){return"string"==typeof e?f==e:e&&"function"==typeof e.exec?e.exec(f):"boolean"==typeof e?e:"function"==typeof e?e(f):!1}var t=e("jsonparse"),l=e("through");n.parse=function(e,f){var n=new t,o=l(function(e){"string"==typeof e&&(e=new d(e)),n.write(e)},function(e){e&&o.write(e),o.queue(null)});"string"==typeof e&&(e=e.split(".").map(function(e){return"*"===e?!0:""===e?{recurse:!0}:e}));var u=0;return e&&e.length||(e=null),n.onValue=function(n){if(this.root||(o.root=n),e){for(var d=0,t=0;d<e.length;){var l,p=e[d];if(t++,p&&!p.recurse){if(l=t===this.stack.length?this:this.stack[t],!l)return;if(!i(p,l.key))return;d++}else{d++;var s=e[d];if(!s)return;for(;;){if(l=t===this.stack.length?this:this.stack[t],!l)return;if(i(s,l.key)){d++;break}t++}}}if(t===this.stack.length){u++;var y=this.stack.slice(1).map(function(e){return e.key}).concat([this.key]),c=this.value[this.key];null!=c&&null!=(c=f?f(c,y):c)&&o.queue(c),delete this.value[this.key]}}},n._onToken=n.onToken,n.onToken=function(f,d){n._onToken(f,d),0===this.stack.length&&o.root&&(e||o.queue(o.root),o.emit("root",o.root,u),u=0,o.root=null)},n.onError=function(e){o.emit("error",e)},o},n.stringify=function(e,f,n,o){o=o||0,e===!1?(e="",f="\n",n=""):null==e&&(e="[\n",f="\n,\n",n="\n]\n");var d,i=!0,t=!1;return d=l(function(n){t=!0;var l=JSON.stringify(n,null,o);i?(i=!1,d.queue(e+l)):d.queue(f+l)},function(f){t||d.queue(e),d.queue(n),d.queue(null)})},n.stringifyObject=function(e,f,n,o){o=o||0,e===!1?(e="",f="\n",n=""):null==e&&(e="{\n",f="\n,\n",n="\n}\n");var d=!0,i=!1;return stream=l(function(n){i=!0;var t=JSON.stringify(n[0])+":"+JSON.stringify(n[1],null,o);d?(d=!1,this.queue(e+t)):this.queue(f+t)},function(f){i||this.queue(e),this.queue(n),this.queue(null)}),stream},f.parent||"browser"===o.title||o.stdin.pipe(n.parse(o.argv[2])).pipe(n.stringify("[",",\n","]\n",2)).pipe(o.stdout)}).call(this,e("../insert-module-globals/node_modules/process/browser.js"),e("buffer").Buffer)},{"../insert-module-globals/node_modules/process/browser.js":35,buffer:29,jsonparse:20,through:21}],20:[function(e,f,n){(function(e){function n(e){for(var f=Object.keys(d),n=0,o=f.length;o>n;n++){var i=f[n];if(d[i]===e)return i}return e&&"0x"+e.toString(16)}function o(){this.tState=w,this.value=void 0,this.string=void 0,this.unicode=void 0,this.negative=void 0,this.magnatude=void 0,this.position=void 0,this.exponent=void 0,this.negativeExponent=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=P,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new e(2),3:new e(3),4:new e(4)}}var d={},i=d.LEFT_BRACE=1,t=d.RIGHT_BRACE=2,l=d.LEFT_BRACKET=3,u=d.RIGHT_BRACKET=4,p=d.COLON=5,s=d.COMMA=6,y=d.TRUE=7,c=d.FALSE=8,a=d.NULL=9,m=d.STRING=10,r=d.NUMBER=11,w=d.START=17,b=d.TRUE1=33,g=d.TRUE2=34,j=d.TRUE3=35,x=d.FALSE1=49,v=d.FALSE2=50,h=d.FALSE3=51,k=d.FALSE4=52,q=d.NULL1=65,z=d.NULL3=66,A=d.NULL2=67,B=d.NUMBER1=81,C=d.NUMBER2=82,D=d.NUMBER3=83,E=d.NUMBER4=84,F=d.NUMBER5=85,G=d.NUMBER6=86,H=d.NUMBER7=87,I=d.NUMBER8=88,J=d.STRING1=97,K=d.STRING2=98,L=d.STRING3=99,M=d.STRING4=100,N=d.STRING5=101,O=d.STRING6=102,P=d.VALUE=113,Q=d.KEY=114,R=d.OBJECT=129,S=d.ARRAY=130,T=o.prototype;T.charError=function(e,f){this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(e[f]))+" at position "+f+" in state "+n(this.tState)))},T.onError=function(e){throw e},T.write=function(f){"string"==typeof f&&(f=new e(f));for(var n,o=0,d=f.length;d>o;o++)if(this.tState===w)n=f[o],123===n?this.onToken(i,"{"):125===n?this.onToken(t,"}"):91===n?this.onToken(l,"["):93===n?this.onToken(u,"]"):58===n?this.onToken(p,":"):44===n?this.onToken(s,","):116===n?this.tState=b:102===n?this.tState=x:110===n?this.tState=q:34===n?(this.string="",this.tState=J):45===n?(this.negative=!0,this.tState=B):48===n?(this.magnatude=0,this.tState=C):n>48&&64>n?(this.magnatude=n-48,this.tState=D):32===n||9===n||10===n||13===n||this.charError(f,o);else if(this.tState===J)if(n=f[o],this.bytes_remaining>0){for(var P=0;P<this.bytes_remaining;P++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+P]=f[P];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,o=o+P-1}else if(0===this.bytes_remaining&&n>=128)if(n>=194&&223>=n&&(this.bytes_in_sequence=2),n>=224&&239>=n&&(this.bytes_in_sequence=3),n>=240&&244>=n&&(this.bytes_in_sequence=4),this.bytes_in_sequence+o>f.length){for(var Q=0;Q<=f.length-1-o;Q++)this.temp_buffs[this.bytes_in_sequence][Q]=f[o+Q];this.bytes_remaining=o+this.bytes_in_sequence-f.length,o=f.length-1}else this.string+=f.slice(o,o+this.bytes_in_sequence).toString(),o=o+this.bytes_in_sequence-1;else 34===n?(this.tState=w,this.onToken(m,this.string),this.string=void 0):92===n?this.tState=K:n>=32?this.string+=String.fromCharCode(n):this.charError(f,o);else this.tState===K?(n=f[o],34===n?(this.string+='"',this.tState=J):92===n?(this.string+="\\",this.tState=J):47===n?(this.string+="/",this.tState=J):98===n?(this.string+="\b",this.tState=J):102===n?(this.string+="\f",this.tState=J):110===n?(this.string+="\n",this.tState=J):114===n?(this.string+="\r",this.tState=J):116===n?(this.string+="	",this.tState=J):117===n?(this.unicode="",this.tState=L):this.charError(f,o)):this.tState===L||this.tState===M||this.tState===N||this.tState===O?(n=f[o],n>=48&&64>n||n>64&&70>=n||n>96&&102>=n?(this.unicode+=String.fromCharCode(n),this.tState++===O&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=J)):this.charError(f,o)):this.tState===B?(n=f[o],48===n?(this.magnatude=0,this.tState=C):n>48&&64>n?(this.magnatude=n-48,this.tState=D):this.charError(f,o)):this.tState===C?(n=f[o],46===n?(this.position=.1,this.tState=E):101===n||69===n?(this.exponent=0,this.tState=G):(this.tState=w,this.onToken(r,0),this.magnatude=void 0,this.negative=void 0,o--)):this.tState===D?(n=f[o],46===n?(this.position=.1,this.tState=E):101===n||69===n?(this.exponent=0,this.tState=G):n>=48&&64>n?this.magnatude=10*this.magnatude+n-48:(this.tState=w,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(r,this.magnatude),this.magnatude=void 0,o--)):this.tState===E?(n=f[o],n>=48&&64>n?(this.magnatude+=this.position*(n-48),this.position/=10,this.tState=F):this.charError(f,o)):this.tState===F?(n=f[o],n>=48&&64>n?(this.magnatude+=this.position*(n-48),this.position/=10):101===n||69===n?(this.exponent=0,this.tState=G):(this.tState=w,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(r,this.negative?-this.magnatude:this.magnatude),this.magnatude=void 0,this.position=void 0,o--)):this.tState===G?(n=f[o],43===n||45===n?(45===n&&(this.negativeExponent=!0),this.tState=H):n>=48&&64>n?(this.exponent=10*this.exponent+(n-48),this.tState=I):this.charError(f,o)):this.tState===H?(n=f[o],n>=48&&64>n?(this.exponent=10*this.exponent+(n-48),this.tState=I):this.charError(f,o)):this.tState===I?(n=f[o],n>=48&&64>n?this.exponent=10*this.exponent+(n-48):(this.negativeExponent&&(this.exponent=-this.exponent,this.negativeExponent=void 0),this.magnatude*=Math.pow(10,this.exponent),this.exponent=void 0,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.tState=w,this.onToken(r,this.magnatude),this.magnatude=void 0,o--)):this.tState===b?114===f[o]?this.tState=g:this.charError(f,o):this.tState===g?117===f[o]?this.tState=j:this.charError(f,o):this.tState===j?101===f[o]?(this.tState=w,this.onToken(y,!0)):this.charError(f,o):this.tState===x?97===f[o]?this.tState=v:this.charError(f,o):this.tState===v?108===f[o]?this.tState=h:this.charError(f,o):this.tState===h?115===f[o]?this.tState=k:this.charError(f,o):this.tState===k?101===f[o]?(this.tState=w,this.onToken(c,!1)):this.charError(f,o):this.tState===q?117===f[o]?this.tState=z:this.charError(f,o):this.tState===z?108===f[o]?this.tState=A:this.charError(f,o):this.tState===A&&(108===f[o]?(this.tState=w,this.onToken(a,null)):this.charError(f,o))},T.onToken=function(e,f){},T.parseError=function(e,f){this.onError(new Error("Unexpected "+n(e)+(f?"("+JSON.stringify(f)+")":"")+" in state "+n(this.state)))},T.onError=function(e){throw e},T.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},T.pop=function(){var e=this.value,f=this.stack.pop();this.value=f.value,this.key=f.key,this.mode=f.mode,this.emit(e),this.mode||(this.state=P)},T.emit=function(e){this.mode&&(this.state=s),this.onValue(e)},T.onValue=function(e){},T.onToken=function(e,f){this.state===P?e===m||e===r||e===y||e===c||e===a?(this.value&&(this.value[this.key]=f),this.emit(f)):e===i?(this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=Q,this.mode=R):e===l?(this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=S,this.state=P):e===t?this.mode===R?this.pop():this.parseError(e,f):e===u&&this.mode===S?this.pop():this.parseError(e,f):this.state===Q?e===m?(this.key=f,this.state=p):e===t?this.pop():this.parseError(e,f):this.state===p?e===p?this.state=P:this.parseError(e,f):this.state===s?e===s?this.mode===S?(this.key++,this.state=P):this.mode===R&&(this.state=Q):e===u&&this.mode===S||e===t&&this.mode===R?this.pop():this.parseError(e,f):this.parseError(e,f)},f.exports=o}).call(this,e("buffer").Buffer)},{buffer:29}],21:[function(e,f,n){(function(o){function d(e,f,n){function d(){for(;p.length&&!y.paused;){var e=p.shift();if(null===e)return y.emit("end");y.emit("data",e)}}function t(){y.writable=!1,f.call(y),!y.readable&&y.autoDestroy&&y.destroy()}e=e||function(e){this.queue(e)},f=f||function(){this.queue(null)};var l=!1,u=!1,p=[],s=!1,y=new i;return y.readable=y.writable=!0,y.paused=!1,y.autoDestroy=!(n&&n.autoDestroy===!1),y.write=function(f){return e.call(this,f),!y.paused},y.queue=y.push=function(e){return s?y:(null===e&&(s=!0),p.push(e),d(),y)},y.on("end",function(){y.readable=!1,!y.writable&&y.autoDestroy&&o.nextTick(function(){y.destroy()})}),y.end=function(e){return l?void 0:(l=!0,arguments.length&&y.write(e),t(),y)},y.destroy=function(){return u?void 0:(u=!0,l=!0,p.length=0,y.writable=y.readable=!1,y.emit("close"),y)},y.pause=function(){return y.paused?void 0:(y.paused=!0,y)},y.resume=function(){return y.paused&&(y.paused=!1,y.emit("resume")),d(),y.paused||y.emit("drain"),y},y}var i=e("stream");n=f.exports=d,d.through=d}).call(this,e("../../../insert-module-globals/node_modules/process/browser.js"))},{"../../../insert-module-globals/node_modules/process/browser.js":35,stream:42}],22:[function(e,n,o){!function(){function e(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var f,n=[];for(f in e)e.hasOwnProperty(f)&&(n[n.length]=f);return n},uniqueId:function(e){var f=++p+"";return e?e+f:f},has:function(e,f){return l.call(e,f)},each:function(e,f,n){if(null!=e)if(t&&e.forEach===t)e.forEach(f,n);else if(e.length===+e.length)for(var o=0,d=e.length;d>o;o++)f.call(n,e[o],o,e);else for(var i in e)this.has(e,i)&&f.call(n,e[i],i,e)},once:function(e){var f,n=!1;return function(){return n?f:(n=!0,f=e.apply(this,arguments),e=null,f)}}}}var d,i=this,t=Array.prototype.forEach,l=Object.prototype.hasOwnProperty,u=Array.prototype.slice,p=0,s=e();d={on:function(e,f,n){if(!c(this,"on",e,[f,n])||!f)return this;this._events||(this._events={});var o=this._events[e]||(this._events[e]=[]);return o.push({callback:f,context:n,ctx:n||this}),this},once:function(e,f,n){if(!c(this,"once",e,[f,n])||!f)return this;var o=this,d=s.once(function(){o.off(e,d),f.apply(this,arguments)});return d._callback=f,this.on(e,d,n)},off:function(e,f,n){var o,d,i,t,l,u,p,y;if(!this._events||!c(this,"off",e,[f,n]))return this;if(!e&&!f&&!n)return this._events={},this;for(t=e?[e]:s.keys(this._events),l=0,u=t.length;u>l;l++)if(e=t[l],i=this._events[e]){if(this._events[e]=o=[],f||n)for(p=0,y=i.length;y>p;p++)d=i[p],(f&&f!==d.callback&&f!==d.callback._callback||n&&n!==d.context)&&o.push(d);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var f=u.call(arguments,1);if(!c(this,"trigger",e,f))return this;var n=this._events[e],o=this._events.all;return n&&a(n,f),o&&a(o,arguments),this},stopListening:function(e,f,n){var o=this._listeners;if(!o)return this;var d=!f&&!n;"object"==typeof f&&(n=this),e&&((o={})[e._listenerId]=e);for(var i in o)o[i].off(f,n,this),d&&delete this._listeners[i];return this}};var y=/\s+/,c=function(e,f,n,o){if(!n)return!0;if("object"==typeof n){for(var d in n)e[f].apply(e,[d,n[d]].concat(o));return!1}if(y.test(n)){for(var i=n.split(y),t=0,l=i.length;l>t;t++)e[f].apply(e,[i[t]].concat(o));return!1}return!0},a=function(e,f){var n,o=-1,d=e.length,i=f[0],t=f[1],l=f[2];switch(f.length){case 0:for(;++o<d;)(n=e[o]).callback.call(n.ctx);return;case 1:for(;++o<d;)(n=e[o]).callback.call(n.ctx,i);return;case 2:for(;++o<d;)(n=e[o]).callback.call(n.ctx,i,t);return;case 3:for(;++o<d;)(n=e[o]).callback.call(n.ctx,i,t,l);return;default:for(;++o<d;)(n=e[o]).callback.apply(n.ctx,f)}},m={listenTo:"on",listenToOnce:"once"};s.each(m,function(e,f){d[f]=function(f,n,o){var d=this._listeners||(this._listeners={}),i=f._listenerId||(f._listenerId=s.uniqueId("l"));return d[i]=f,"object"==typeof n&&(o=this),f[e](n,o,this),this}}),d.bind=d.on,d.unbind=d.off,d.mixin=function(e){var f=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return s.each(f,function(f){e[f]=this[f]},this),e},"undefined"!=typeof o?("undefined"!=typeof n&&n.exports&&(o=n.exports=d),o.BackboneEvents=d):"function"==typeof f&&"object"==typeof f.amd?f(function(){return d}):i.BackboneEvents=d}(this)},{}],23:[function(e,f,n){f.exports=e("./backbone-events-standalone")},{"./backbone-events-standalone":22}],24:[function(e,f,n){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function f(e){var f=e.charCodeAt(0);return f===t?62:f===l?63:u>f?-1:u+10>f?f-u+26+26:s+26>f?f-s:p+26>f?f-p+26:void 0}function n(e){function n(e){p[y++]=e}var o,d,t,l,u,p;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.length;u="="===e.charAt(s-2)?2:"="===e.charAt(s-1)?1:0,p=new i(3*e.length/4-u),t=u>0?e.length-4:e.length;var y=0;for(o=0,d=0;t>o;o+=4,d+=3)l=f(e.charAt(o))<<18|f(e.charAt(o+1))<<12|f(e.charAt(o+2))<<6|f(e.charAt(o+3)),n((16711680&l)>>16),n((65280&l)>>8),n(255&l);return 2===u?(l=f(e.charAt(o))<<2|f(e.charAt(o+1))>>4,n(255&l)):1===u&&(l=f(e.charAt(o))<<10|f(e.charAt(o+1))<<4|f(e.charAt(o+2))>>2,n(l>>8&255),n(255&l)),p}function d(e){function f(e){return o.charAt(e)}function n(e){return f(e>>18&63)+f(e>>12&63)+f(e>>6&63)+f(63&e)}var d,i,t,l=e.length%3,u="";for(d=0,t=e.length-l;t>d;d+=3)i=(e[d]<<16)+(e[d+1]<<8)+e[d+2],u+=n(i);switch(l){case 1:i=e[e.length-1],u+=f(i>>2),u+=f(i<<4&63),u+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],u+=f(i>>10),u+=f(i>>4&63),u+=f(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,t="+".charCodeAt(0),l="/".charCodeAt(0),u="0".charCodeAt(0),p="a".charCodeAt(0),s="A".charCodeAt(0);e.toByteArray=n,e.fromByteArray=d}("undefined"==typeof n?this.base64js={}:n)},{}],25:[function(e,f,n){},{}],26:[function(e,f,n){var o=f.exports,d=(e("events").EventEmitter,e("./lib/request")),i=e("url");o.request=function(e,f){"string"==typeof e&&(e=i.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.protocol||(e.scheme?e.protocol=e.scheme+":":e.protocol=window.location.protocol),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https:"==e.protocol?443:80);var n=new d(new t,e);return f&&n.on("response",f),n},o.get=function(e,f){e.method="GET";var n=o.request(e,f);return n.end(),n},o.Agent=function(){},o.Agent.defaultMaxSockets=4;var t=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],f=0;f<e.length;f++)try{var n=new window.ActiveXObject(e[f]);return function(){if(n){var o=n;return n=null,o}return new window.ActiveXObject(e[f])}}catch(o){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();o.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":27,events:32,url:55}],27:[function(e,f,n){var o=e("stream"),d=e("./response"),i=e("Base64"),t=e("inherits"),l=f.exports=function(e,f){var n=this;n.writable=!0,n.xhr=e,n.body=[],n.uri=(f.protocol||"http:")+"//"+f.host+(f.port?":"+f.port:"")+(f.path||"/"),"undefined"==typeof f.withCredentials&&(f.withCredentials=!0);try{e.withCredentials=f.withCredentials}catch(o){}if(f.responseType)try{e.responseType=f.responseType}catch(o){}if(e.open(f.method||"GET",n.uri,!0),e.onerror=function(e){n.emit("error",new Error("Network error"))},n._headers={},f.headers)for(var t=u(f.headers),l=0;l<t.length;l++){var p=t[l];if(n.isSafeRequestHeader(p)){var s=f.headers[p];n.setHeader(p,s)}}f.auth&&this.setHeader("Authorization","Basic "+i.btoa(f.auth));var y=new d;y.on("close",function(){n.emit("close")}),y.on("ready",function(){n.emit("response",y)}),y.on("error",function(e){n.emit("error",e)}),e.onreadystatechange=function(){e.__aborted||y.handle(e)}};t(l,o),l.prototype.setHeader=function(e,f){this._headers[e.toLowerCase()]=f},l.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]},l.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},l.prototype.write=function(e){this.body.push(e)},l.prototype.destroy=function(e){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},l.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var f=u(this._headers),n=0;n<f.length;n++){var o=f[n],d=this._headers[o];if(p(d))for(var i=0;i<d.length;i++)this.xhr.setRequestHeader(o,d[i]);else this.xhr.setRequestHeader(o,d)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(p(this.body[0])){for(var t=[],n=0;n<this.body.length;n++)t.push.apply(t,this.body[n]);this.xhr.send(t)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var l=0,n=0;n<this.body.length;n++)l+=this.body[n].length;for(var t=new this.body[0].constructor(l),s=0,n=0;n<this.body.length;n++)for(var c=this.body[n],i=0;i<c.length;i++)t[s++]=c[i];this.xhr.send(t)}else if(y(this.body[0]))this.xhr.send(this.body[0]);else{for(var t="",n=0;n<this.body.length;n++)t+=this.body[n].toString();this.xhr.send(t)}},l.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],l.prototype.isSafeRequestHeader=function(e){return e?-1===s(l.unsafeHeaders,e.toLowerCase()):!1};var u=Object.keys||function(e){var f=[];for(var n in e)f.push(n);return f},p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=function(e,f){if(e.indexOf)return e.indexOf(f);for(var n=0;n<e.length;n++)if(e[n]===f)return n;return-1},y=function(e){return"undefined"!=typeof Blob&&e instanceof Blob?!0:"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?!0:"undefined"!=typeof FormData&&e instanceof FormData?!0:void 0}},{"./response":28,Base64:18,inherits:34,stream:42}],28:[function(e,f,n){function o(e){for(var f=e.getAllResponseHeaders().split(/\r?\n/),n={},o=0;o<f.length;o++){
var d=f[o];if(""!==d){var i=d.match(/^([^:]+):\s*(.*)/);if(i){var t=i[1].toLowerCase(),l=i[2];void 0!==n[t]?u(n[t])?n[t].push(l):n[t]=[n[t],l]:n[t]=l}else n[d]=!0}}return n}var d=e("stream"),i=e("util"),t=f.exports=function(e){this.offset=0,this.readable=!0};i.inherits(t,d);var l={streaming:!0,status2:!0};t.prototype.getResponse=function(e){var f=String(e.responseType).toLowerCase();return"blob"===f?e.responseBlob||e.response:"arraybuffer"===f?e.response:e.responseText},t.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},t.prototype.handle=function(e){if(2===e.readyState&&l.status2){try{this.statusCode=e.status,this.headers=o(e)}catch(f){l.status2=!1}l.status2&&this.emit("ready")}else if(l.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=o(e),this.emit("ready"))}catch(f){}try{this._emitData(e)}catch(f){l.streaming=!1}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"))},t.prototype._emitData=function(e){var f=this.getResponse(e);return f.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(f,this.offset)),void(this.offset=f.byteLength)):void(f.length>this.offset&&(this.emit("data",f.slice(this.offset)),this.offset=f.length))};var u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{stream:42,util:58}],29:[function(e,f,n){function o(e,f,n){if(!(this instanceof o))return new o(e,f,n);var d,i=typeof e;if("number"===i)d=e>0?e>>>0:0;else if("string"===i)"base64"===f&&(e=k(e)),d=o.byteLength(e,f);else{if("object"!==i||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&J(e.data)&&(e=e.data),d=+e.length>0?Math.floor(+e.length):0}if(this.length>K)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K.toString(16)+" bytes");var t;o.TYPED_ARRAY_SUPPORT?t=o._augment(new Uint8Array(d)):(t=this,t.length=d,t._isBuffer=!0);var l;if(o.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)t._set(e);else if(z(e))if(o.isBuffer(e))for(l=0;d>l;l++)t[l]=e.readUInt8(l);else for(l=0;d>l;l++)t[l]=(e[l]%256+256)%256;else if("string"===i)t.write(e,0,f);else if("number"===i&&!o.TYPED_ARRAY_SUPPORT&&!n)for(l=0;d>l;l++)t[l]=0;return t}function d(e,f,n,o){n=Number(n)||0;var d=e.length-n;o?(o=Number(o),o>d&&(o=d)):o=d;var i=f.length;if(i%2!==0)throw new Error("Invalid hex string");o>i/2&&(o=i/2);for(var t=0;o>t;t++){var l=parseInt(f.substr(2*t,2),16);if(isNaN(l))throw new Error("Invalid hex string");e[n+t]=l}return t}function i(e,f,n,o){var d=F(B(f),e,n,o);return d}function t(e,f,n,o){var d=F(C(f),e,n,o);return d}function l(e,f,n,o){return t(e,f,n,o)}function u(e,f,n,o){var d=F(E(f),e,n,o);return d}function p(e,f,n,o){var d=F(D(f),e,n,o,2);return d}function s(e,f,n){return 0===f&&n===e.length?H.fromByteArray(e):H.fromByteArray(e.slice(f,n))}function y(e,f,n){var o="",d="";n=Math.min(e.length,n);for(var i=f;n>i;i++)e[i]<=127?(o+=G(d)+String.fromCharCode(e[i]),d=""):d+="%"+e[i].toString(16);return o+G(d)}function c(e,f,n){var o="";n=Math.min(e.length,n);for(var d=f;n>d;d++)o+=String.fromCharCode(e[d]);return o}function a(e,f,n){return c(e,f,n)}function m(e,f,n){var o=e.length;(!f||0>f)&&(f=0),(!n||0>n||n>o)&&(n=o);for(var d="",i=f;n>i;i++)d+=A(e[i]);return d}function r(e,f,n){for(var o=e.slice(f,n),d="",i=0;i<o.length;i+=2)d+=String.fromCharCode(o[i]+256*o[i+1]);return d}function w(e,f,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+f>n)throw new RangeError("Trying to access beyond buffer length")}function b(e,f,n,d,i,t){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(f>i||t>f)throw new TypeError("value is out of bounds");if(n+d>e.length)throw new TypeError("index out of range")}function g(e,f,n,o){0>f&&(f=65535+f+1);for(var d=0,i=Math.min(e.length-n,2);i>d;d++)e[n+d]=(f&255<<8*(o?d:1-d))>>>8*(o?d:1-d)}function j(e,f,n,o){0>f&&(f=4294967295+f+1);for(var d=0,i=Math.min(e.length-n,4);i>d;d++)e[n+d]=f>>>8*(o?d:3-d)&255}function x(e,f,n,o,d,i){if(f>d||i>f)throw new TypeError("value is out of bounds");if(n+o>e.length)throw new TypeError("index out of range")}function v(e,f,n,o,d){return d||x(e,f,n,4,3.4028234663852886e38,-3.4028234663852886e38),I.write(e,f,n,o,23,4),n+4}function h(e,f,n,o,d){return d||x(e,f,n,8,1.7976931348623157e308,-1.7976931348623157e308),I.write(e,f,n,o,52,8),n+8}function k(e){for(e=q(e).replace(M,"");e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return J(e)||o.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function A(e){return 16>e?"0"+e.toString(16):e.toString(16)}function B(e){for(var f=[],n=0;n<e.length;n++){var o=e.charCodeAt(n);if(127>=o)f.push(o);else{var d=n;o>=55296&&57343>=o&&n++;for(var i=encodeURIComponent(e.slice(d,n+1)).substr(1).split("%"),t=0;t<i.length;t++)f.push(parseInt(i[t],16))}}return f}function C(e){for(var f=[],n=0;n<e.length;n++)f.push(255&e.charCodeAt(n));return f}function D(e){for(var f,n,o,d=[],i=0;i<e.length;i++)f=e.charCodeAt(i),n=f>>8,o=f%256,d.push(o),d.push(n);return d}function E(e){return H.toByteArray(e)}function F(e,f,n,o,d){d&&(o-=o%d);for(var i=0;o>i&&!(i+n>=f.length||i>=e.length);i++)f[i+n]=e[i];return i}function G(e){try{return decodeURIComponent(e)}catch(f){return String.fromCharCode(65533)}}var H=e("base64-js"),I=e("ieee754"),J=e("is-array");n.Buffer=o,n.SlowBuffer=o,n.INSPECT_MAX_BYTES=50,o.poolSize=8192;var K=1073741823;o.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),f=new Uint8Array(e);return f.foo=function(){return 42},42===f.foo()&&"function"==typeof f.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,f){if(!o.isBuffer(e)||!o.isBuffer(f))throw new TypeError("Arguments must be Buffers");for(var n=e.length,d=f.length,i=0,t=Math.min(n,d);t>i&&e[i]===f[i];i++);return i!==t&&(n=e[i],d=f[i]),d>n?-1:n>d?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,f){if(!J(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new o(0);if(1===e.length)return e[0];var n;if(void 0===f)for(f=0,n=0;n<e.length;n++)f+=e[n].length;var d=new o(f),i=0;for(n=0;n<e.length;n++){var t=e[n];t.copy(d,i),i+=t.length}return d},o.byteLength=function(e,f){var n;switch(e+="",f||"utf8"){case"ascii":case"binary":case"raw":n=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;case"hex":n=e.length>>>1;break;case"utf8":case"utf-8":n=B(e).length;break;case"base64":n=E(e).length;break;default:n=e.length}return n},o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(e,f,n){var o=!1;if(f>>>=0,n=void 0===n||n===1/0?this.length:n>>>0,e||(e="utf8"),0>f&&(f=0),n>this.length&&(n=this.length),f>=n)return"";for(;;)switch(e){case"hex":return m(this,f,n);case"utf8":case"utf-8":return y(this,f,n);case"ascii":return c(this,f,n);case"binary":return a(this,f,n);case"base64":return s(this,f,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r(this,f,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===o.compare(this,e)},o.prototype.inspect=function(){var e="",f=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,f).match(/.{2}/g).join(" "),this.length>f&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return o.compare(this,e)},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,f){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,f)},o.prototype.write=function(e,f,n,o){if(isFinite(f))isFinite(n)||(o=n,n=void 0);else{var s=o;o=f,f=n,n=s}f=Number(f)||0;var y=this.length-f;n?(n=Number(n),n>y&&(n=y)):n=y,o=String(o||"utf8").toLowerCase();var c;switch(o){case"hex":c=d(this,e,f,n);break;case"utf8":case"utf-8":c=i(this,e,f,n);break;case"ascii":c=t(this,e,f,n);break;case"binary":c=l(this,e,f,n);break;case"base64":c=u(this,e,f,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=p(this,e,f,n);break;default:throw new TypeError("Unknown encoding: "+o)}return c},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,f){var n=this.length;if(e=~~e,f=void 0===f?n:~~f,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>f?(f+=n,0>f&&(f=0)):f>n&&(f=n),e>f&&(f=e),o.TYPED_ARRAY_SUPPORT)return o._augment(this.subarray(e,f));for(var d=f-e,i=new o(d,void 0,!0),t=0;d>t;t++)i[t]=this[t+e];return i},o.prototype.readUInt8=function(e,f){return f||w(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,f){return f||w(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,f){return f||w(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,f){return f||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,f){return f||w(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readInt8=function(e,f){return f||w(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,f){f||w(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,f){f||w(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,f){return f||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,f){return f||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,f){return f||w(e,4,this.length),I.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,f){return f||w(e,4,this.length),I.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,f){return f||w(e,8,this.length),I.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,f){return f||w(e,8,this.length),I.read(this,e,!1,52,8)},o.prototype.writeUInt8=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[f]=e,f+1},o.prototype.writeUInt16LE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[f]=e,this[f+1]=e>>>8):g(this,e,f,!0),f+2},o.prototype.writeUInt16BE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>8,this[f+1]=e):g(this,e,f,!1),f+2},o.prototype.writeUInt32LE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[f+3]=e>>>24,this[f+2]=e>>>16,this[f+1]=e>>>8,this[f]=e):j(this,e,f,!0),f+4},o.prototype.writeUInt32BE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>24,this[f+1]=e>>>16,this[f+2]=e>>>8,this[f+3]=e):j(this,e,f,!1),f+4},o.prototype.writeInt8=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[f]=e,f+1},o.prototype.writeInt16LE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[f]=e,this[f+1]=e>>>8):g(this,e,f,!0),f+2},o.prototype.writeInt16BE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>8,this[f+1]=e):g(this,e,f,!1),f+2},o.prototype.writeInt32LE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[f]=e,this[f+1]=e>>>8,this[f+2]=e>>>16,this[f+3]=e>>>24):j(this,e,f,!0),f+4},o.prototype.writeInt32BE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>24,this[f+1]=e>>>16,this[f+2]=e>>>8,this[f+3]=e):j(this,e,f,!1),f+4},o.prototype.writeFloatLE=function(e,f,n){return v(this,e,f,!0,n)},o.prototype.writeFloatBE=function(e,f,n){return v(this,e,f,!1,n)},o.prototype.writeDoubleLE=function(e,f,n){return h(this,e,f,!0,n)},o.prototype.writeDoubleBE=function(e,f,n){return h(this,e,f,!1,n)},o.prototype.copy=function(e,f,n,d){var i=this;if(n||(n=0),d||0===d||(d=this.length),f||(f=0),d!==n&&0!==e.length&&0!==i.length){if(n>d)throw new TypeError("sourceEnd < sourceStart");if(0>f||f>=e.length)throw new TypeError("targetStart out of bounds");if(0>n||n>=i.length)throw new TypeError("sourceStart out of bounds");if(0>d||d>i.length)throw new TypeError("sourceEnd out of bounds");d>this.length&&(d=this.length),e.length-f<d-n&&(d=e.length-f+n);var t=d-n;if(1e3>t||!o.TYPED_ARRAY_SUPPORT)for(var l=0;t>l;l++)e[l+f]=this[l+n];else e._set(this.subarray(n,n+t),f)}},o.prototype.fill=function(e,f,n){if(e||(e=0),f||(f=0),n||(n=this.length),f>n)throw new TypeError("end < start");if(n!==f&&0!==this.length){if(0>f||f>=this.length)throw new TypeError("start out of bounds");if(0>n||n>this.length)throw new TypeError("end out of bounds");var o;if("number"==typeof e)for(o=f;n>o;o++)this[o]=e;else{var d=B(e.toString()),i=d.length;for(o=f;n>o;o++)this[o]=d[o%i]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var e=new Uint8Array(this.length),f=0,n=e.length;n>f;f+=1)e[f]=this[f];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var L=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=L.get,e.set=L.set,e.write=L.write,e.toString=L.toString,e.toLocaleString=L.toString,e.toJSON=L.toJSON,e.equals=L.equals,e.compare=L.compare,e.copy=L.copy,e.slice=L.slice,e.readUInt8=L.readUInt8,e.readUInt16LE=L.readUInt16LE,e.readUInt16BE=L.readUInt16BE,e.readUInt32LE=L.readUInt32LE,e.readUInt32BE=L.readUInt32BE,e.readInt8=L.readInt8,e.readInt16LE=L.readInt16LE,e.readInt16BE=L.readInt16BE,e.readInt32LE=L.readInt32LE,e.readInt32BE=L.readInt32BE,e.readFloatLE=L.readFloatLE,e.readFloatBE=L.readFloatBE,e.readDoubleLE=L.readDoubleLE,e.readDoubleBE=L.readDoubleBE,e.writeUInt8=L.writeUInt8,e.writeUInt16LE=L.writeUInt16LE,e.writeUInt16BE=L.writeUInt16BE,e.writeUInt32LE=L.writeUInt32LE,e.writeUInt32BE=L.writeUInt32BE,e.writeInt8=L.writeInt8,e.writeInt16LE=L.writeInt16LE,e.writeInt16BE=L.writeInt16BE,e.writeInt32LE=L.writeInt32LE,e.writeInt32BE=L.writeInt32BE,e.writeFloatLE=L.writeFloatLE,e.writeFloatBE=L.writeFloatBE,e.writeDoubleLE=L.writeDoubleLE,e.writeDoubleBE=L.writeDoubleBE,e.fill=L.fill,e.inspect=L.inspect,e.toArrayBuffer=L.toArrayBuffer,e};var M=/[^+\/0-9A-z]/g},{"base64-js":24,ieee754:33,"is-array":36}],30:[function(e,f,n){(function(e){function f(e){return Array.isArray?Array.isArray(e):"[object Array]"===w(e)}function o(e){return"boolean"==typeof e}function d(e){return null===e}function i(e){return null==e}function t(e){return"number"==typeof e}function l(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function p(e){return void 0===e}function s(e){return"[object RegExp]"===w(e)}function y(e){return"object"==typeof e&&null!==e}function c(e){return"[object Date]"===w(e)}function a(e){return"[object Error]"===w(e)||e instanceof Error}function m(e){return"function"==typeof e}function r(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function w(e){return Object.prototype.toString.call(e)}n.isArray=f,n.isBoolean=o,n.isNull=d,n.isNullOrUndefined=i,n.isNumber=t,n.isString=l,n.isSymbol=u,n.isUndefined=p,n.isRegExp=s,n.isObject=y,n.isDate=c,n.isError=a,n.isFunction=m,n.isPrimitive=r,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":37}],31:[function(e,n,o){(function(o,d){(function(){"use strict";function i(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function u(e){U=e}function p(e){Y=e}function s(){var e=o.nextTick,f=o.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(f)&&"0"===f[1]&&"10"===f[2]&&(e=setImmediate),function(){e(r)}}function y(){return function(){T(r)}}function c(){var e=0,f=new _(r),n=document.createTextNode("");return f.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function a(){var e=new MessageChannel;return e.port1.onmessage=r,function(){e.port2.postMessage(0)}}function m(){return function(){setTimeout(r,1)}}function r(){for(var e=0;X>e;e+=2){var f=ne[e],n=ne[e+1];f(n),ne[e]=void 0,ne[e+1]=void 0}X=0}function w(){try{var f=e,n=f("vertx");return T=n.runOnLoop||n.runOnContext,y()}catch(o){return m()}}function b(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function j(){return new TypeError("A promises callback cannot return that same promise.")}function x(e){try{return e.then}catch(f){return te.error=f,te}}function v(e,f,n,o){try{e.call(f,n,o)}catch(d){return d}}function h(e,f,n){Y(function(e){var o=!1,d=v(n,f,function(n){o||(o=!0,f!==n?z(e,n):B(e,n))},function(f){o||(o=!0,C(e,f))},"Settle: "+(e._label||" unknown promise"));!o&&d&&(o=!0,C(e,d))},e)}function k(e,f){f._state===de?B(e,f._result):f._state===ie?C(e,f._result):D(f,void 0,function(f){z(e,f)},function(f){C(e,f)})}function q(e,f){if(f.constructor===e.constructor)k(e,f);else{var n=x(f);n===te?C(e,te.error):void 0===n?B(e,f):t(n)?h(e,f,n):B(e,f)}}function z(e,f){e===f?C(e,g()):i(f)?q(e,f):B(e,f)}function A(e){e._onerror&&e._onerror(e._result),E(e)}function B(e,f){e._state===oe&&(e._result=f,e._state=de,0!==e._subscribers.length&&Y(E,e))}function C(e,f){e._state===oe&&(e._state=ie,e._result=f,Y(A,e))}function D(e,f,n,o){var d=e._subscribers,i=d.length;e._onerror=null,d[i]=f,d[i+de]=n,d[i+ie]=o,0===i&&e._state&&Y(E,e)}function E(e){var f=e._subscribers,n=e._state;if(0!==f.length){for(var o,d,i=e._result,t=0;t<f.length;t+=3)o=f[t],d=f[t+n],o?H(n,o,d,i):d(i);e._subscribers.length=0}}function F(){this.error=null}function G(e,f){try{return e(f)}catch(n){return le.error=n,le}}function H(e,f,n,o){var d,i,l,u,p=t(n);if(p){if(d=G(n,o),d===le?(u=!0,i=d.error,d=null):l=!0,f===d)return void C(f,j())}else d=o,l=!0;f._state!==oe||(p&&l?z(f,d):u?C(f,i):e===de?B(f,d):e===ie&&C(f,d))}function I(e,f){try{f(function(f){z(e,f)},function(f){C(e,f)})}catch(n){C(e,n)}}function J(e,f){var n=this;n._instanceConstructor=e,n.promise=new e(b),n._validateInput(f)?(n._input=f,n.length=f.length,n._remaining=f.length,n._init(),0===n.length?B(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&B(n.promise,n._result))):C(n.promise,n._validationError())}function K(e){return new ue(this,e).promise}function L(e){function f(e){z(d,e)}function n(e){C(d,e)}var o=this,d=new o(b);if(!W(e))return C(d,new TypeError("You must pass an array to race.")),d;for(var i=e.length,t=0;d._state===oe&&i>t;t++)D(o.resolve(e[t]),void 0,f,n);return d}function M(e){var f=this;if(e&&"object"==typeof e&&e.constructor===f)return e;var n=new f(b);return z(n,e),n}function N(e){var f=this,n=new f(b);return C(n,e),n}function O(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Q(e){this._id=ae++,this._state=void 0,this._result=void 0,this._subscribers=[],b!==e&&(t(e)||O(),this instanceof Q||P(),I(this,e))}function R(){var e;if("undefined"!=typeof d)e=d;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(f){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=me)}var S;S=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var T,U,V,W=S,X=0,Y=({}.toString,function(e,f){ne[X]=e,ne[X+1]=f,X+=2,2===X&&(U?U(r):V())}),Z="undefined"!=typeof window?window:void 0,$=Z||{},_=$.MutationObserver||$.WebKitMutationObserver,ee="undefined"!=typeof o&&"[object process]"==={}.toString.call(o),fe="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3);V=ee?s():_?c():fe?a():void 0===Z&&"function"==typeof e?w():m();var oe=void 0,de=1,ie=2,te=new F,le=new F;J.prototype._validateInput=function(e){return W(e)},J.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},J.prototype._init=function(){this._result=new Array(this.length)};var ue=J;J.prototype._enumerate=function(){for(var e=this,f=e.length,n=e.promise,o=e._input,d=0;n._state===oe&&f>d;d++)e._eachEntry(o[d],d)},J.prototype._eachEntry=function(e,f){var n=this,o=n._instanceConstructor;l(e)?e.constructor===o&&e._state!==oe?(e._onerror=null,n._settledAt(e._state,f,e._result)):n._willSettleAt(o.resolve(e),f):(n._remaining--,n._result[f]=e)},J.prototype._settledAt=function(e,f,n){var o=this,d=o.promise;d._state===oe&&(o._remaining--,e===ie?C(d,n):o._result[f]=n),0===o._remaining&&B(d,o._result)},J.prototype._willSettleAt=function(e,f){var n=this;D(e,void 0,function(e){n._settledAt(de,f,e)},function(e){n._settledAt(ie,f,e)})};var pe=K,se=L,ye=M,ce=N,ae=0,me=Q;Q.all=pe,Q.race=se,Q.resolve=ye,Q.reject=ce,Q._setScheduler=u,Q._setAsap=p,Q._asap=Y,Q.prototype={constructor:Q,then:function(e,f){var n=this,o=n._state;if(o===de&&!e||o===ie&&!f)return this;var d=new this.constructor(b),i=n._result;if(o){var t=arguments[o-1];Y(function(){H(o,d,t,i)})}else D(n,d,e,f);return d},"catch":function(e){return this.then(null,e)}};var re=R,we={Promise:me,polyfill:re};"function"==typeof f&&f.amd?f(function(){return we}):"undefined"!=typeof n&&n.exports?n.exports=we:"undefined"!=typeof this&&(this.ES6Promise=we),re()}).call(this)}).call(this,e("../../insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../insert-module-globals/node_modules/process/browser.js":35}],32:[function(e,f,n){function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(e){return"function"==typeof e}function i(e){return"number"==typeof e}function t(e){return"object"==typeof e&&null!==e}function l(e){return void 0===e}f.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},o.prototype.emit=function(e){var f,n,o,i,u,p;if(this._events||(this._events={}),"error"===e&&(!this._events.error||t(this._events.error)&&!this._events.error.length)){if(f=arguments[1],f instanceof Error)throw f;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],l(n))return!1;if(d(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,i=new Array(o-1),u=1;o>u;u++)i[u-1]=arguments[u];n.apply(this,i)}else if(t(n)){for(o=arguments.length,i=new Array(o-1),u=1;o>u;u++)i[u-1]=arguments[u];for(p=n.slice(),o=p.length,u=0;o>u;u++)p[u].apply(this,i)}return!0},o.prototype.addListener=function(e,f){var n;if(!d(f))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,d(f.listener)?f.listener:f),this._events[e]?t(this._events[e])?this._events[e].push(f):this._events[e]=[this._events[e],f]:this._events[e]=f,t(this._events[e])&&!this._events[e].warned){var n;n=l(this._maxListeners)?o.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(e,f){function n(){this.removeListener(e,n),o||(o=!0,f.apply(this,arguments))}if(!d(f))throw TypeError("listener must be a function");var o=!1;return n.listener=f,this.on(e,n),this},o.prototype.removeListener=function(e,f){var n,o,i,l;if(!d(f))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,o=-1,n===f||d(n.listener)&&n.listener===f)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,f);else if(t(n)){for(l=i;l-->0;)if(n[l]===f||n[l].listener&&n[l].listener===f){o=l;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,f)}return this},o.prototype.removeAllListeners=function(e){var f,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(f in this._events)"removeListener"!==f&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],d(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},o.prototype.listeners=function(e){var f;return f=this._events&&this._events[e]?d(this._events[e])?[this._events[e]]:this._events[e].slice():[]},o.listenerCount=function(e,f){var n;return n=e._events&&e._events[f]?d(e._events[f])?1:e._events[f].length:0}},{}],33:[function(e,f,n){n.read=function(e,f,n,o,d){var i,t,l=8*d-o-1,u=(1<<l)-1,p=u>>1,s=-7,y=n?d-1:0,c=n?-1:1,a=e[f+y];for(y+=c,i=a&(1<<-s)-1,a>>=-s,s+=l;s>0;i=256*i+e[f+y],y+=c,s-=8);for(t=i&(1<<-s)-1,i>>=-s,s+=o;s>0;t=256*t+e[f+y],y+=c,s-=8);if(0===i)i=1-p;else{if(i===u)return t?NaN:(a?-1:1)*(1/0);t+=Math.pow(2,o),i-=p}return(a?-1:1)*t*Math.pow(2,i-o)},n.write=function(e,f,n,o,d,i){var t,l,u,p=8*i-d-1,s=(1<<p)-1,y=s>>1,c=23===d?Math.pow(2,-24)-Math.pow(2,-77):0,a=o?0:i-1,m=o?1:-1,r=0>f||0===f&&0>1/f?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(l=isNaN(f)?1:0,t=s):(t=Math.floor(Math.log(f)/Math.LN2),f*(u=Math.pow(2,-t))<1&&(t--,u*=2),f+=t+y>=1?c/u:c*Math.pow(2,1-y),f*u>=2&&(t++,u/=2),t+y>=s?(l=0,t=s):t+y>=1?(l=(f*u-1)*Math.pow(2,d),t+=y):(l=f*Math.pow(2,y-1)*Math.pow(2,d),t=0));d>=8;e[n+a]=255&l,a+=m,l/=256,d-=8);for(t=t<<d|l,p+=d;p>0;e[n+a]=255&t,a+=m,t/=256,p-=8);e[n+a-m]|=128*r}},{}],34:[function(e,f,n){"function"==typeof Object.create?f.exports=function(e,f){e.super_=f,e.prototype=Object.create(f.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:f.exports=function(e,f){e.super_=f;var n=function(){};n.prototype=f.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],35:[function(e,f,n){function o(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function i(e){if(y===setTimeout)return setTimeout(e,0);if((y===o||!y)&&setTimeout)return y=setTimeout,setTimeout(e,0);try{return y(e,0)}catch(f){try{return y.call(null,e,0)}catch(f){return y.call(this,e,0)}}}function t(e){if(c===clearTimeout)return clearTimeout(e);if((c===d||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(f){try{return c.call(null,e)}catch(f){return c.call(this,e)}}}function l(){w&&m&&(w=!1,m.length?r=m.concat(r):b=-1,r.length&&u())}function u(){if(!w){var e=i(l);w=!0;for(var f=r.length;f;){for(m=r,r=[];++b<f;)m&&m[b].run();b=-1,f=r.length}m=null,w=!1,t(e)}}function p(e,f){this.fun=e,this.array=f}function s(){}var y,c,a=f.exports={};!function(){try{y="function"==typeof setTimeout?setTimeout:o}catch(e){y=o}try{c="function"==typeof clearTimeout?clearTimeout:d}catch(e){c=d}}();var m,r=[],w=!1,b=-1;a.nextTick=function(e){var f=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)f[n-1]=arguments[n];r.push(new p(e,f)),1!==r.length||w||i(u)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.prependListener=s,a.prependOnceListener=s,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],36:[function(e,f,n){var o=Array.isArray,d=Object.prototype.toString;f.exports=o||function(e){return!!e&&"[object Array]"==d.call(e)}},{}],37:[function(e,f,n){function o(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function d(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&o(e.slice(0,0))}f.exports=function(e){return null!=e&&(o(e)||d(e)||!!e._isBuffer)}},{}],38:[function(e,n,o){(function(e){!function(d){function i(e){throw RangeError(I[e])}function t(e,f){for(var n=e.length;n--;)e[n]=f(e[n]);return e}function l(e,f){return t(e.split(H),f).join(".")}function u(e){for(var f,n,o=[],d=0,i=e.length;i>d;)f=e.charCodeAt(d++),f>=55296&&56319>=f&&i>d?(n=e.charCodeAt(d++),56320==(64512&n)?o.push(((1023&f)<<10)+(1023&n)+65536):(o.push(f),d--)):o.push(f);return o}function p(e){return t(e,function(e){var f="";return e>65535&&(e-=65536,f+=L(e>>>10&1023|55296),e=56320|1023&e),f+=L(e)}).join("")}function s(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:k}function y(e,f){return e+22+75*(26>e)-((0!=f)<<5)}function c(e,f,n){var o=0;for(e=n?K(e/B):e>>1,e+=K(e/f);e>J*z>>1;o+=k)e=K(e/J);return K(o+(J+1)*e/(e+A))}function a(e){var f,n,o,d,t,l,u,y,a,m,r=[],w=e.length,b=0,g=D,j=C;for(n=e.lastIndexOf(E),0>n&&(n=0),o=0;n>o;++o)e.charCodeAt(o)>=128&&i("not-basic"),r.push(e.charCodeAt(o));for(d=n>0?n+1:0;w>d;){for(t=b,l=1,u=k;d>=w&&i("invalid-input"),y=s(e.charCodeAt(d++)),(y>=k||y>K((h-b)/l))&&i("overflow"),b+=y*l,a=j>=u?q:u>=j+z?z:u-j,!(a>y);u+=k)m=k-a,l>K(h/m)&&i("overflow"),l*=m;f=r.length+1,j=c(b-t,f,0==t),K(b/f)>h-g&&i("overflow"),g+=K(b/f),b%=f,r.splice(b++,0,g)}return p(r)}function m(e){var f,n,o,d,t,l,p,s,a,m,r,w,b,g,j,x=[];for(e=u(e),w=e.length,f=D,n=0,t=C,l=0;w>l;++l)r=e[l],128>r&&x.push(L(r));for(o=d=x.length,d&&x.push(E);w>o;){for(p=h,l=0;w>l;++l)r=e[l],r>=f&&p>r&&(p=r);for(b=o+1,p-f>K((h-n)/b)&&i("overflow"),n+=(p-f)*b,f=p,l=0;w>l;++l)if(r=e[l],f>r&&++n>h&&i("overflow"),r==f){for(s=n,a=k;m=t>=a?q:a>=t+z?z:a-t,!(m>s);a+=k)j=s-m,g=k-m,x.push(L(y(m+j%g,0))),s=K(j/g);x.push(L(y(s,0))),t=c(n,b,o==d),n=0,++o}++n,++f}return x.join("")}function r(e){return l(e,function(e){return F.test(e)?a(e.slice(4).toLowerCase()):e})}function w(e){return l(e,function(e){return G.test(e)?"xn--"+m(e):e})}var b="object"==typeof o&&o,g="object"==typeof n&&n&&n.exports==b&&n,j="object"==typeof e&&e;(j.global===j||j.window===j)&&(d=j);var x,v,h=2147483647,k=36,q=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^ -~]/,H=/\x2E|\u3002|\uFF0E|\uFF61/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=k-q,K=Math.floor,L=String.fromCharCode;if(x={version:"1.2.4",ucs2:{decode:u,encode:p},decode:a,encode:m,toASCII:w,toUnicode:r},"function"==typeof f&&"object"==typeof f.amd&&f.amd)f("punycode",function(){return x});else if(b&&!b.nodeType)if(g)g.exports=x;else for(v in x)x.hasOwnProperty(v)&&(b[v]=x[v]);else d.punycode=x;
}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],39:[function(e,f,n){"use strict";function o(e,f){return Object.prototype.hasOwnProperty.call(e,f)}f.exports=function(e,f,n,i){f=f||"&",n=n||"=";var t={};if("string"!=typeof e||0===e.length)return t;var l=/\+/g;e=e.split(f);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var p=e.length;u>0&&p>u&&(p=u);for(var s=0;p>s;++s){var y,c,a,m,r=e[s].replace(l,"%20"),w=r.indexOf(n);w>=0?(y=r.substr(0,w),c=r.substr(w+1)):(y=r,c=""),a=decodeURIComponent(y),m=decodeURIComponent(c),o(t,a)?d(t[a])?t[a].push(m):t[a]=[t[a],m]:t[a]=m}return t};var d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],40:[function(e,f,n){"use strict";function o(e,f){if(e.map)return e.map(f);for(var n=[],o=0;o<e.length;o++)n.push(f(e[o],o));return n}var d=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};f.exports=function(e,f,n,l){return f=f||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(t(e),function(t){var l=encodeURIComponent(d(t))+n;return i(e[t])?o(e[t],function(e){return l+encodeURIComponent(d(e))}).join(f):l+encodeURIComponent(d(e[t]))}).join(f):l?encodeURIComponent(d(l))+n+encodeURIComponent(d(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t=Object.keys||function(e){var f=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&f.push(n);return f}},{}],41:[function(e,f,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":39,"./encode":40}],42:[function(e,f,n){function o(){d.call(this)}f.exports=o;var d=e("events").EventEmitter,i=e("inherits");i(o,d),o.Readable=e("readable-stream/readable.js"),o.Writable=e("readable-stream/writable.js"),o.Duplex=e("readable-stream/duplex.js"),o.Transform=e("readable-stream/transform.js"),o.PassThrough=e("readable-stream/passthrough.js"),o.Stream=o,o.prototype.pipe=function(e,f){function n(f){e.writable&&!1===e.write(f)&&p.pause&&p.pause()}function o(){p.readable&&p.resume&&p.resume()}function i(){s||(s=!0,e.end())}function t(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(u(),0===d.listenerCount(this,"error"))throw e}function u(){p.removeListener("data",n),e.removeListener("drain",o),p.removeListener("end",i),p.removeListener("close",t),p.removeListener("error",l),e.removeListener("error",l),p.removeListener("end",u),p.removeListener("close",u),e.removeListener("close",u)}var p=this;p.on("data",n),e.on("drain",o),e._isStdio||f&&f.end===!1||(p.on("end",i),p.on("close",t));var s=!1;return p.on("error",l),e.on("error",l),p.on("end",u),p.on("close",u),e.on("close",u),e.emit("pipe",p),e}},{events:32,inherits:34,"readable-stream/duplex.js":44,"readable-stream/passthrough.js":50,"readable-stream/readable.js":51,"readable-stream/transform.js":52,"readable-stream/writable.js":53}],43:[function(e,f,n){f.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],44:[function(e,f,n){f.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":45}],45:[function(e,f,n){(function(n){function o(e){return this instanceof o?(u.call(this,e),p.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",d)):new o(e)}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function i(e,f){for(var n=0,o=e.length;o>n;n++)f(e[n],n)}f.exports=o;var t=Object.keys||function(e){var f=[];for(var n in e)f.push(n);return f},l=e("core-util-is");l.inherits=e("inherits");var u=e("./_stream_readable"),p=e("./_stream_writable");l.inherits(o,u),i(t(p.prototype),function(e){o.prototype[e]||(o.prototype[e]=p.prototype[e])})}).call(this,e("../../../../insert-module-globals/node_modules/process/browser.js"))},{"../../../../insert-module-globals/node_modules/process/browser.js":35,"./_stream_readable":47,"./_stream_writable":49,"core-util-is":30,inherits:34}],46:[function(e,f,n){function o(e){return this instanceof o?void d.call(this,e):new o(e)}f.exports=o;var d=e("./_stream_transform"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(o,d),o.prototype._transform=function(e,f,n){n(null,e)}},{"./_stream_transform":48,"core-util-is":30,inherits:34}],47:[function(e,f,n){(function(n){function o(f,n){var o=e("./_stream_duplex");f=f||{};var d=f.highWaterMark,i=f.objectMode?16:16384;this.highWaterMark=d||0===d?d:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!f.objectMode,n instanceof o&&(this.objectMode=this.objectMode||!!f.readableObjectMode),this.defaultEncoding=f.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,f.encoding&&(C||(C=e("string_decoder/").StringDecoder),this.decoder=new C(f.encoding),this.encoding=f.encoding)}function d(f){e("./_stream_duplex");return this instanceof d?(this._readableState=new o(f,this),this.readable=!0,void A.call(this)):new d(f)}function i(e,f,n,o,d){var i=p(f,n);if(i)e.emit("error",i);else if(B.isNullOrUndefined(n))f.reading=!1,f.ended||s(e,f);else if(f.objectMode||n&&n.length>0)if(f.ended&&!d){var l=new Error("stream.push() after EOF");e.emit("error",l)}else if(f.endEmitted&&d){var l=new Error("stream.unshift() after end event");e.emit("error",l)}else!f.decoder||d||o||(n=f.decoder.write(n)),d||(f.reading=!1),f.flowing&&0===f.length&&!f.sync?(e.emit("data",n),e.read(0)):(f.length+=f.objectMode?1:n.length,d?f.buffer.unshift(n):f.buffer.push(n),f.needReadable&&y(e)),a(e,f);else d||(f.reading=!1);return t(f)}function t(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function l(e){if(e>=E)e=E;else{e--;for(var f=1;32>f;f<<=1)e|=e>>f;e++}return e}function u(e,f){return 0===f.length&&f.ended?0:f.objectMode?0===e?0:1:isNaN(e)||B.isNull(e)?f.flowing&&f.buffer.length?f.buffer[0].length:f.length:0>=e?0:(e>f.highWaterMark&&(f.highWaterMark=l(e)),e>f.length?f.ended?f.length:(f.needReadable=!0,0):e)}function p(e,f){var n=null;return B.isBuffer(f)||B.isString(f)||B.isNullOrUndefined(f)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function s(e,f){if(f.decoder&&!f.ended){var n=f.decoder.end();n&&n.length&&(f.buffer.push(n),f.length+=f.objectMode?1:n.length)}f.ended=!0,y(e)}function y(e){var f=e._readableState;f.needReadable=!1,f.emittedReadable||(D("emitReadable",f.flowing),f.emittedReadable=!0,f.sync?n.nextTick(function(){c(e)}):c(e))}function c(e){D("emit readable"),e.emit("readable"),g(e)}function a(e,f){f.readingMore||(f.readingMore=!0,n.nextTick(function(){m(e,f)}))}function m(e,f){for(var n=f.length;!f.reading&&!f.flowing&&!f.ended&&f.length<f.highWaterMark&&(D("maybeReadMore read 0"),e.read(0),n!==f.length);)n=f.length;f.readingMore=!1}function r(e){return function(){var f=e._readableState;D("pipeOnDrain",f.awaitDrain),f.awaitDrain&&f.awaitDrain--,0===f.awaitDrain&&z.listenerCount(e,"data")&&(f.flowing=!0,g(e))}}function w(e,f){f.resumeScheduled||(f.resumeScheduled=!0,n.nextTick(function(){b(e,f)}))}function b(e,f){f.resumeScheduled=!1,e.emit("resume"),g(e),f.flowing&&!f.reading&&e.read(0)}function g(e){var f=e._readableState;if(D("flow",f.flowing),f.flowing)do var n=e.read();while(null!==n&&f.flowing)}function j(e,f){var n,o=f.buffer,d=f.length,i=!!f.decoder,t=!!f.objectMode;if(0===o.length)return null;if(0===d)n=null;else if(t)n=o.shift();else if(!e||e>=d)n=i?o.join(""):q.concat(o,d),o.length=0;else if(e<o[0].length){var l=o[0];n=l.slice(0,e),o[0]=l.slice(e)}else if(e===o[0].length)n=o.shift();else{n=i?"":new q(e);for(var u=0,p=0,s=o.length;s>p&&e>u;p++){var l=o[0],y=Math.min(e-u,l.length);i?n+=l.slice(0,y):l.copy(n,u,0,y),y<l.length?o[0]=l.slice(y):o.shift(),u+=y}}return n}function x(e){var f=e._readableState;if(f.length>0)throw new Error("endReadable called on non-empty stream");f.endEmitted||(f.ended=!0,n.nextTick(function(){f.endEmitted||0!==f.length||(f.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function v(e,f){for(var n=0,o=e.length;o>n;n++)f(e[n],n)}function h(e,f){for(var n=0,o=e.length;o>n;n++)if(e[n]===f)return n;return-1}f.exports=d;var k=e("isarray"),q=e("buffer").Buffer;d.ReadableState=o;var z=e("events").EventEmitter;z.listenerCount||(z.listenerCount=function(e,f){return e.listeners(f).length});var A=e("stream"),B=e("core-util-is");B.inherits=e("inherits");var C,D=e("util");D=D&&D.debuglog?D.debuglog("stream"):function(){},B.inherits(d,A),d.prototype.push=function(e,f){var n=this._readableState;return B.isString(e)&&!n.objectMode&&(f=f||n.defaultEncoding,f!==n.encoding&&(e=new q(e,f),f="")),i(this,n,e,f,!1)},d.prototype.unshift=function(e){var f=this._readableState;return i(this,f,e,"",!0)},d.prototype.setEncoding=function(f){return C||(C=e("string_decoder/").StringDecoder),this._readableState.decoder=new C(f),this._readableState.encoding=f,this};var E=8388608;d.prototype.read=function(e){D("read",e);var f=this._readableState,n=e;if((!B.isNumber(e)||e>0)&&(f.emittedReadable=!1),0===e&&f.needReadable&&(f.length>=f.highWaterMark||f.ended))return D("read: emitReadable",f.length,f.ended),0===f.length&&f.ended?x(this):y(this),null;if(e=u(e,f),0===e&&f.ended)return 0===f.length&&x(this),null;var o=f.needReadable;D("need readable",o),(0===f.length||f.length-e<f.highWaterMark)&&(o=!0,D("length less than watermark",o)),(f.ended||f.reading)&&(o=!1,D("reading or ended",o)),o&&(D("do read"),f.reading=!0,f.sync=!0,0===f.length&&(f.needReadable=!0),this._read(f.highWaterMark),f.sync=!1),o&&!f.reading&&(e=u(n,f));var d;return d=e>0?j(e,f):null,B.isNull(d)&&(f.needReadable=!0,e=0),f.length-=e,0!==f.length||f.ended||(f.needReadable=!0),n!==e&&f.ended&&0===f.length&&x(this),B.isNull(d)||this.emit("data",d),d},d.prototype._read=function(e){this.emit("error",new Error("not implemented"))},d.prototype.pipe=function(e,f){function o(e){D("onunpipe"),e===y&&i()}function d(){D("onend"),e.end()}function i(){D("cleanup"),e.removeListener("close",u),e.removeListener("finish",p),e.removeListener("drain",w),e.removeListener("error",l),e.removeListener("unpipe",o),y.removeListener("end",d),y.removeListener("end",i),y.removeListener("data",t),!c.awaitDrain||e._writableState&&!e._writableState.needDrain||w()}function t(f){D("ondata");var n=e.write(f);!1===n&&(D("false write response, pause",y._readableState.awaitDrain),y._readableState.awaitDrain++,y.pause())}function l(f){D("onerror",f),s(),e.removeListener("error",l),0===z.listenerCount(e,"error")&&e.emit("error",f)}function u(){e.removeListener("finish",p),s()}function p(){D("onfinish"),e.removeListener("close",u),s()}function s(){D("unpipe"),y.unpipe(e)}var y=this,c=this._readableState;switch(c.pipesCount){case 0:c.pipes=e;break;case 1:c.pipes=[c.pipes,e];break;default:c.pipes.push(e)}c.pipesCount+=1,D("pipe count=%d opts=%j",c.pipesCount,f);var a=(!f||f.end!==!1)&&e!==n.stdout&&e!==n.stderr,m=a?d:i;c.endEmitted?n.nextTick(m):y.once("end",m),e.on("unpipe",o);var w=r(y);return e.on("drain",w),y.on("data",t),e._events&&e._events.error?k(e._events.error)?e._events.error.unshift(l):e._events.error=[l,e._events.error]:e.on("error",l),e.once("close",u),e.once("finish",p),e.emit("pipe",y),c.flowing||(D("pipe resume"),y.resume()),e},d.prototype.unpipe=function(e){var f=this._readableState;if(0===f.pipesCount)return this;if(1===f.pipesCount)return e&&e!==f.pipes?this:(e||(e=f.pipes),f.pipes=null,f.pipesCount=0,f.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=f.pipes,o=f.pipesCount;f.pipes=null,f.pipesCount=0,f.flowing=!1;for(var d=0;o>d;d++)n[d].emit("unpipe",this);return this}var d=h(f.pipes,e);return-1===d?this:(f.pipes.splice(d,1),f.pipesCount-=1,1===f.pipesCount&&(f.pipes=f.pipes[0]),e.emit("unpipe",this),this)},d.prototype.on=function(e,f){var o=A.prototype.on.call(this,e,f);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var d=this._readableState;if(!d.readableListening)if(d.readableListening=!0,d.emittedReadable=!1,d.needReadable=!0,d.reading)d.length&&y(this,d);else{var i=this;n.nextTick(function(){D("readable nexttick read 0"),i.read(0)})}}return o},d.prototype.addListener=d.prototype.on,d.prototype.resume=function(){var e=this._readableState;return e.flowing||(D("resume"),e.flowing=!0,e.reading||(D("resume read 0"),this.read(0)),w(this,e)),this},d.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this},d.prototype.wrap=function(e){var f=this._readableState,n=!1,o=this;e.on("end",function(){if(D("wrapped end"),f.decoder&&!f.ended){var e=f.decoder.end();e&&e.length&&o.push(e)}o.push(null)}),e.on("data",function(d){if(D("wrapped data"),f.decoder&&(d=f.decoder.write(d)),d&&(f.objectMode||d.length)){var i=o.push(d);i||(n=!0,e.pause())}});for(var d in e)B.isFunction(e[d])&&B.isUndefined(this[d])&&(this[d]=function(f){return function(){return e[f].apply(e,arguments)}}(d));var i=["error","close","destroy","pause","resume"];return v(i,function(f){e.on(f,o.emit.bind(o,f))}),o._read=function(f){D("wrapped _read",f),n&&(n=!1,e.resume())},o},d._fromList=j}).call(this,e("../../../../insert-module-globals/node_modules/process/browser.js"))},{"../../../../insert-module-globals/node_modules/process/browser.js":35,"./_stream_duplex":45,buffer:29,"core-util-is":30,events:32,inherits:34,isarray:43,stream:42,"string_decoder/":54,util:25}],48:[function(e,f,n){function o(e,f){this.afterTransform=function(e,n){return d(f,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function d(e,f,n){var o=e._transformState;o.transforming=!1;var d=o.writecb;if(!d)return e.emit("error",new Error("no writecb in Transform class"));o.writechunk=null,o.writecb=null,u.isNullOrUndefined(n)||e.push(n),d&&d(f);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);l.call(this,e),this._transformState=new o(e,this);var f=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(e){t(f,e)}):t(f)})}function t(e,f){if(f)return e.emit("error",f);var n=e._writableState,o=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(o.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}f.exports=i;var l=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(i,l),i.prototype.push=function(e,f){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,f)},i.prototype._transform=function(e,f,n){throw new Error("not implemented")},i.prototype._write=function(e,f,n){var o=this._transformState;if(o.writecb=n,o.writechunk=e,o.writeencoding=f,!o.transforming){var d=this._readableState;(o.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},i.prototype._read=function(e){var f=this._transformState;u.isNull(f.writechunk)||!f.writecb||f.transforming?f.needTransform=!0:(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform))}},{"./_stream_duplex":45,"core-util-is":30,inherits:34}],49:[function(e,f,n){(function(n){function o(e,f,n){this.chunk=e,this.encoding=f,this.callback=n}function d(f,n){var o=e("./_stream_duplex");f=f||{};var d=f.highWaterMark,i=f.objectMode?16:16384;this.highWaterMark=d||0===d?d:i,this.objectMode=!!f.objectMode,n instanceof o&&(this.objectMode=this.objectMode||!!f.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var t=f.decodeStrings===!1;this.decodeStrings=!t,this.defaultEncoding=f.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){a(n,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function i(f){var n=e("./_stream_duplex");return this instanceof i||this instanceof n?(this._writableState=new d(f,this),this.writable=!0,void k.call(this)):new i(f)}function t(e,f,o){var d=new Error("write after end");e.emit("error",d),n.nextTick(function(){o(d)})}function l(e,f,o,d){var i=!0;if(!(h.isBuffer(o)||h.isString(o)||h.isNullOrUndefined(o)||f.objectMode)){var t=new TypeError("Invalid non-string/buffer chunk");e.emit("error",t),n.nextTick(function(){d(t)}),i=!1}return i}function u(e,f,n){return!e.objectMode&&e.decodeStrings!==!1&&h.isString(f)&&(f=new v(f,n)),f}function p(e,f,n,d,i){n=u(f,n,d),h.isBuffer(n)&&(d="buffer");var t=f.objectMode?1:n.length;f.length+=t;var l=f.length<f.highWaterMark;return l||(f.needDrain=!0),f.writing||f.corked?f.buffer.push(new o(n,d,i)):s(e,f,!1,t,n,d,i),l}function s(e,f,n,o,d,i,t){f.writelen=o,f.writecb=t,f.writing=!0,f.sync=!0,n?e._writev(d,f.onwrite):e._write(d,i,f.onwrite),f.sync=!1}function y(e,f,o,d,i){o?n.nextTick(function(){f.pendingcb--,i(d)}):(f.pendingcb--,i(d)),e._writableState.errorEmitted=!0,e.emit("error",d)}function c(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function a(e,f){var o=e._writableState,d=o.sync,i=o.writecb;if(c(o),f)y(e,o,d,f,i);else{var t=b(e,o);t||o.corked||o.bufferProcessing||!o.buffer.length||w(e,o),d?n.nextTick(function(){m(e,o,t,i)}):m(e,o,t,i)}}function m(e,f,n,o){n||r(e,f),f.pendingcb--,o(),j(e,f)}function r(e,f){0===f.length&&f.needDrain&&(f.needDrain=!1,e.emit("drain"))}function w(e,f){if(f.bufferProcessing=!0,e._writev&&f.buffer.length>1){for(var n=[],o=0;o<f.buffer.length;o++)n.push(f.buffer[o].callback);f.pendingcb++,s(e,f,!0,f.length,f.buffer,"",function(e){for(var o=0;o<n.length;o++)f.pendingcb--,n[o](e)}),f.buffer=[]}else{for(var o=0;o<f.buffer.length;o++){var d=f.buffer[o],i=d.chunk,t=d.encoding,l=d.callback,u=f.objectMode?1:i.length;if(s(e,f,!1,u,i,t,l),f.writing){o++;break}}o<f.buffer.length?f.buffer=f.buffer.slice(o):f.buffer.length=0}f.bufferProcessing=!1}function b(e,f){return f.ending&&0===f.length&&!f.finished&&!f.writing}function g(e,f){f.prefinished||(f.prefinished=!0,e.emit("prefinish"))}function j(e,f){var n=b(e,f);return n&&(0===f.pendingcb?(g(e,f),f.finished=!0,e.emit("finish")):g(e,f)),n}function x(e,f,o){f.ending=!0,j(e,f),o&&(f.finished?n.nextTick(o):e.once("finish",o)),f.ended=!0}f.exports=i;var v=e("buffer").Buffer;i.WritableState=d;var h=e("core-util-is");h.inherits=e("inherits");var k=e("stream");h.inherits(i,k),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(e,f,n){var o=this._writableState,d=!1;return h.isFunction(f)&&(n=f,f=null),h.isBuffer(e)?f="buffer":f||(f=o.defaultEncoding),h.isFunction(n)||(n=function(){}),o.ended?t(this,o,n):l(this,o,e,n)&&(o.pendingcb++,d=p(this,o,e,f,n)),d},i.prototype.cork=function(){var e=this._writableState;e.corked++},i.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||w(this,e))},i.prototype._write=function(e,f,n){n(new Error("not implemented"))},i.prototype._writev=null,i.prototype.end=function(e,f,n){var o=this._writableState;h.isFunction(e)?(n=e,e=null,f=null):h.isFunction(f)&&(n=f,f=null),h.isNullOrUndefined(e)||this.write(e,f),o.corked&&(o.corked=1,this.uncork()),o.ending||o.finished||x(this,o,n)}}).call(this,e("../../../../insert-module-globals/node_modules/process/browser.js"))},{"../../../../insert-module-globals/node_modules/process/browser.js":35,"./_stream_duplex":45,buffer:29,"core-util-is":30,inherits:34,stream:42}],50:[function(e,f,n){f.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":46}],51:[function(e,f,n){(function(o){n=f.exports=e("./lib/_stream_readable.js"),n.Stream=e("stream"),n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),o.browser||"disable"!==o.env.READABLE_STREAM||(f.exports=e("stream"))}).call(this,e("../../../insert-module-globals/node_modules/process/browser.js"))},{"../../../insert-module-globals/node_modules/process/browser.js":35,"./lib/_stream_duplex.js":45,"./lib/_stream_passthrough.js":46,"./lib/_stream_readable.js":47,"./lib/_stream_transform.js":48,"./lib/_stream_writable.js":49,stream:42}],52:[function(e,f,n){f.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":48}],53:[function(e,f,n){f.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":49}],54:[function(e,f,n){function o(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function d(e){return e.toString(this.encoding)}function i(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function t(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var l=e("buffer").Buffer,u=l.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},p=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),o(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=t;break;default:return void(this.write=d)}this.charBuffer=new l(6),this.charReceived=0,this.charLength=0};p.prototype.write=function(e){for(var f="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),f=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var o=f.charCodeAt(f.length-1);if(!(o>=55296&&56319>=o)){if(this.charReceived=this.charLength=0,0===e.length)return f;break}this.charLength+=this.surrogateSize,f=""}this.detectIncompleteChar(e);var d=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,d),d-=this.charReceived),f+=e.toString(this.encoding,0,d);var d=f.length-1,o=f.charCodeAt(d);if(o>=55296&&56319>=o){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),f.substring(0,d)}return f},p.prototype.detectIncompleteChar=function(e){for(var f=e.length>=3?3:e.length;f>0;f--){var n=e[e.length-f];if(1==f&&n>>5==6){this.charLength=2;break}if(2>=f&&n>>4==14){this.charLength=3;break}if(3>=f&&n>>3==30){this.charLength=4;break}}this.charReceived=f},p.prototype.end=function(e){var f="";if(e&&e.length&&(f=this.write(e)),this.charReceived){var n=this.charReceived,o=this.charBuffer,d=this.encoding;f+=o.slice(0,n).toString(d)}return f}},{buffer:29}],55:[function(e,f,n){function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function d(e,f,n){if(e&&p(e)&&e instanceof o)return e;var d=new o;return d.parse(e,f,n),d}function i(e){return u(e)&&(e=d(e)),e instanceof o?e.format():o.prototype.format.call(e)}function t(e,f){return d(e,!1,!0).resolve(f)}function l(e,f){return e?d(e,!1,!0).resolveObject(f):f}function u(e){return"string"==typeof e}function p(e){return"object"==typeof e&&null!==e}function s(e){return null===e}function y(e){return null==e}var c=e("punycode");n.parse=d,n.resolve=t,n.resolveObject=l,n.format=i,n.Url=o;var a=/^([a-z0-9.+-]+:)/i,m=/:[0-9]*$/,r=["<",">",'"',"`"," ","\r","\n","	"],w=["{","}","|","\\","^","`"].concat(r),b=["'"].concat(w),g=["%","/","?",";","#"].concat(b),j=["/","?","#"],x=255,v=/^[a-z0-9A-Z_-]{0,63}$/,h=/^([a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},q={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=e("querystring");o.prototype.parse=function(e,f,n){if(!u(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e;o=o.trim();var d=a.exec(o);if(d){d=d[0];var i=d.toLowerCase();this.protocol=i,o=o.substr(d.length)}if(n||d||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var t="//"===o.substr(0,2);!t||d&&q[d]||(o=o.substr(2),this.slashes=!0)}if(!q[d]&&(t||d&&!z[d])){for(var l=-1,p=0;p<j.length;p++){var s=o.indexOf(j[p]);-1!==s&&(-1===l||l>s)&&(l=s)}var y,m;m=-1===l?o.lastIndexOf("@"):o.lastIndexOf("@",l),-1!==m&&(y=o.slice(0,m),o=o.slice(m+1),this.auth=decodeURIComponent(y)),l=-1;for(var p=0;p<g.length;p++){var s=o.indexOf(g[p]);-1!==s&&(-1===l||l>s)&&(l=s)}-1===l&&(l=o.length),this.host=o.slice(0,l),o=o.slice(l),this.parseHost(),this.hostname=this.hostname||"";var r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(var w=this.hostname.split(/\./),p=0,B=w.length;B>p;p++){var C=w[p];if(C&&!C.match(v)){for(var D="",E=0,F=C.length;F>E;E++)D+=C.charCodeAt(E)>127?"x":C[E];if(!D.match(v)){var G=w.slice(0,p),H=w.slice(p+1),I=C.match(h);I&&(G.push(I[1]),H.unshift(I[2])),H.length&&(o="/"+H.join(".")+o),this.hostname=G.join(".");break}}}if(this.hostname.length>x?this.hostname="":this.hostname=this.hostname.toLowerCase(),!r){for(var J=this.hostname.split("."),K=[],p=0;p<J.length;++p){var L=J[p];K.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+c.encode(L):L)}this.hostname=K.join(".")}var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!k[i])for(var p=0,B=b.length;B>p;p++){var O=b[p],P=encodeURIComponent(O);P===O&&(P=escape(O)),o=o.split(O).join(P)}var Q=o.indexOf("#");-1!==Q&&(this.hash=o.substr(Q),o=o.slice(0,Q));var R=o.indexOf("?");if(-1!==R?(this.search=o.substr(R),this.query=o.substr(R+1),f&&(this.query=A.parse(this.query)),o=o.slice(0,R)):f&&(this.search="",this.query={}),o&&(this.pathname=o),z[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",L=this.search||"";this.path=M+L}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var f=this.protocol||"",n=this.pathname||"",o=this.hash||"",d=!1,i="";this.host?d=e+this.host:this.hostname&&(d=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(d+=":"+this.port)),this.query&&p(this.query)&&Object.keys(this.query).length&&(i=A.stringify(this.query));var t=this.search||i&&"?"+i||"";return f&&":"!==f.substr(-1)&&(f+=":"),this.slashes||(!f||z[f])&&d!==!1?(d="//"+(d||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):d||(d=""),o&&"#"!==o.charAt(0)&&(o="#"+o),t&&"?"!==t.charAt(0)&&(t="?"+t),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),t=t.replace("#","%23"),f+d+n+t+o},o.prototype.resolve=function(e){return this.resolveObject(d(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(u(e)){var f=new o;f.parse(e,!1,!0),e=f}var n=new o;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(f){"protocol"!==f&&(n[f]=e[f])}),z[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!z[e.protocol])return Object.keys(e).forEach(function(f){n[f]=e[f]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||q[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var i=n.pathname||"",t=n.search||"";n.path=i+t}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var l=n.pathname&&"/"===n.pathname.charAt(0),p=e.host||e.pathname&&"/"===e.pathname.charAt(0),c=p||l||n.host&&e.pathname,a=c,m=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],r=n.protocol&&!z[n.protocol];if(r&&(n.hostname="",n.port=null,n.host&&(""===m[0]?m[0]=n.host:m.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),c=c&&(""===d[0]||""===m[0])),p)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,m=d;else if(d.length)m||(m=[]),m.pop(),m=m.concat(d),n.search=e.search,n.query=e.query;else if(!y(e.search)){if(r){n.hostname=n.host=m.shift();var w=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;w&&(n.auth=w.shift(),n.host=n.hostname=w.shift())}return n.search=e.search,n.query=e.query,s(n.pathname)&&s(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!m.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var b=m.slice(-1)[0],g=(n.host||e.host)&&("."===b||".."===b)||""===b,j=0,x=m.length;x>=0;x--)b=m[x],"."==b?m.splice(x,1):".."===b?(m.splice(x,1),j++):j&&(m.splice(x,1),j--);if(!c&&!a)for(;j--;j)m.unshift("..");!c||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),g&&"/"!==m.join("/").substr(-1)&&m.push("");var v=""===m[0]||m[0]&&"/"===m[0].charAt(0);if(r){n.hostname=n.host=v?"":m.length?m.shift():"";var w=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;w&&(n.auth=w.shift(),n.host=n.hostname=w.shift())}return c=c||n.host&&m.length,c&&!v&&m.unshift(""),m.length?n.pathname=m.join("/"):(n.pathname=null,n.path=null),s(n.pathname)&&s(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,f=m.exec(e);f&&(f=f[0],":"!==f&&(this.port=f.substr(1)),e=e.substr(0,e.length-f.length)),e&&(this.hostname=e)}},{punycode:38,querystring:41}],56:[function(e,f,n){f.exports=e(34)},{"/home/FILESERVER5/micklem/yy406/projects/imjs/node_modules/inherits/inherits_browser.js":34}],57:[function(e,f,n){f.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],58:[function(e,f,n){(function(f,o){function d(e,f){var o={seen:[],stylize:t};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),r(f)?o.showHidden=f:f&&n._extend(o,f),v(o.showHidden)&&(o.showHidden=!1),v(o.depth)&&(o.depth=2),v(o.colors)&&(o.colors=!1),v(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=i),u(o,e,o.depth)}function i(e,f){var n=d.styles[f];return n?"["+d.colors[n][0]+"m"+e+"["+d.colors[n][1]+"m":e}function t(e,f){return e}function l(e){var f={};return e.forEach(function(e,n){f[e]=!0}),f}function u(e,f,o){if(e.customInspect&&f&&A(f.inspect)&&f.inspect!==n.inspect&&(!f.constructor||f.constructor.prototype!==f)){var d=f.inspect(o,e);return j(d)||(d=u(e,d,o)),d}var i=p(e,f);if(i)return i;var t=Object.keys(f),r=l(t);if(e.showHidden&&(t=Object.getOwnPropertyNames(f)),z(f)&&(t.indexOf("message")>=0||t.indexOf("description")>=0))return s(f);if(0===t.length){if(A(f)){var w=f.name?": "+f.name:"";return e.stylize("[Function"+w+"]","special")}if(h(f))return e.stylize(RegExp.prototype.toString.call(f),"regexp");if(q(f))return e.stylize(Date.prototype.toString.call(f),"date");if(z(f))return s(f);
}var b="",g=!1,x=["{","}"];if(m(f)&&(g=!0,x=["[","]"]),A(f)){var v=f.name?": "+f.name:"";b=" [Function"+v+"]"}if(h(f)&&(b=" "+RegExp.prototype.toString.call(f)),q(f)&&(b=" "+Date.prototype.toUTCString.call(f)),z(f)&&(b=" "+s(f)),0===t.length&&(!g||0==f.length))return x[0]+b+x[1];if(0>o)return h(f)?e.stylize(RegExp.prototype.toString.call(f),"regexp"):e.stylize("[Object]","special");e.seen.push(f);var k;return k=g?y(e,f,o,r,t):t.map(function(n){return c(e,f,o,r,n,g)}),e.seen.pop(),a(k,b,x)}function p(e,f){if(v(f))return e.stylize("undefined","undefined");if(j(f)){var n="'"+JSON.stringify(f).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(f)?e.stylize(""+f,"number"):r(f)?e.stylize(""+f,"boolean"):w(f)?e.stylize("null","null"):void 0}function s(e){return"["+Error.prototype.toString.call(e)+"]"}function y(e,f,n,o,d){for(var i=[],t=0,l=f.length;l>t;++t)F(f,String(t))?i.push(c(e,f,n,o,String(t),!0)):i.push("");return d.forEach(function(d){d.match(/^\d+$/)||i.push(c(e,f,n,o,d,!0))}),i}function c(e,f,n,o,d,i){var t,l,p;if(p=Object.getOwnPropertyDescriptor(f,d)||{value:f[d]},p.get?l=p.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):p.set&&(l=e.stylize("[Setter]","special")),F(o,d)||(t="["+d+"]"),l||(e.seen.indexOf(p.value)<0?(l=w(n)?u(e,p.value,null):u(e,p.value,n-1),l.indexOf("\n")>-1&&(l=i?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n"))):l=e.stylize("[Circular]","special")),v(t)){if(i&&d.match(/^\d+$/))return l;t=JSON.stringify(""+d),t.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(t=t.substr(1,t.length-2),t=e.stylize(t,"name")):(t=t.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t=e.stylize(t,"string"))}return t+": "+l}function a(e,f,n){var o=0,d=e.reduce(function(e,f){return o++,f.indexOf("\n")>=0&&o++,e+f.replace(/\u001b\[\d\d?m/g,"").length+1},0);return d>60?n[0]+(""===f?"":f+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+f+" "+e.join(", ")+" "+n[1]}function m(e){return Array.isArray(e)}function r(e){return"boolean"==typeof e}function w(e){return null===e}function b(e){return null==e}function g(e){return"number"==typeof e}function j(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function v(e){return void 0===e}function h(e){return k(e)&&"[object RegExp]"===C(e)}function k(e){return"object"==typeof e&&null!==e}function q(e){return k(e)&&"[object Date]"===C(e)}function z(e){return k(e)&&("[object Error]"===C(e)||e instanceof Error)}function A(e){return"function"==typeof e}function B(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function C(e){return Object.prototype.toString.call(e)}function D(e){return 10>e?"0"+e.toString(10):e.toString(10)}function E(){var e=new Date,f=[D(e.getHours()),D(e.getMinutes()),D(e.getSeconds())].join(":");return[e.getDate(),J[e.getMonth()],f].join(" ")}function F(e,f){return Object.prototype.hasOwnProperty.call(e,f)}var G=/%[sdj%]/g;n.format=function(e){if(!j(e)){for(var f=[],n=0;n<arguments.length;n++)f.push(d(arguments[n]));return f.join(" ")}for(var n=1,o=arguments,i=o.length,t=String(e).replace(G,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(f){return"[Circular]"}default:return e}}),l=o[n];i>n;l=o[++n])t+=w(l)||!k(l)?" "+l:" "+d(l);return t},n.deprecate=function(e,d){function i(){if(!t){if(f.throwDeprecation)throw new Error(d);f.traceDeprecation?console.trace(d):console.error(d),t=!0}return e.apply(this,arguments)}if(v(o.process))return function(){return n.deprecate(e,d).apply(this,arguments)};if(f.noDeprecation===!0)return e;var t=!1;return i};var H,I={};n.debuglog=function(e){if(v(H)&&(H=f.env.NODE_DEBUG||""),e=e.toUpperCase(),!I[e])if(new RegExp("\\b"+e+"\\b","i").test(H)){var o=f.pid;I[e]=function(){var f=n.format.apply(n,arguments);console.error("%s %d: %s",e,o,f)}}else I[e]=function(){};return I[e]},n.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=m,n.isBoolean=r,n.isNull=w,n.isNullOrUndefined=b,n.isNumber=g,n.isString=j,n.isSymbol=x,n.isUndefined=v,n.isRegExp=h,n.isObject=k,n.isDate=q,n.isError=z,n.isFunction=A,n.isPrimitive=B,n.isBuffer=e("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",E(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,f){if(!f||!k(f))return e;for(var n=Object.keys(f),o=n.length;o--;)e[n[o]]=f[n[o]];return e}}).call(this,e("../insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../insert-module-globals/node_modules/process/browser.js":35,"./support/isBuffer":57,inherits:56}]},{},[2])(2)})}(window.intermine);